<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ee Fook Ming">
<meta name="dcterms.date" content="2025-02-08">

<title>Take Home Exercise 02 – ISSS608</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ISSS608</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex00/Hands-on_Ex00.html">
 <span class="dropdown-text">Hands-on Exercise 0</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html">
 <span class="dropdown-text">Hands-on Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04.html">
 <span class="dropdown-text">Hands-on Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05.html">
 <span class="dropdown-text">Hands-on Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex06.html">
 <span class="dropdown-text">Hands-on Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex07/Hands-on_Ex07.html">
 <span class="dropdown-text">Hands-on Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex08/Hands-on_Ex08.html">
 <span class="dropdown-text">Hands-on Exercise 8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex09/Hands-on_Ex09.html">
 <span class="dropdown-text">Hands-on Exercise 9</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/app/profile/fook.ming.ee/viz/In-classEx01_17377902282300/Dashboard1">
 <span class="dropdown-text">In-class Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/app/profile/fook.ming.ee/viz/In-classEx02_17377901895230/Dashboard2">
 <span class="dropdown-text">In-class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/app/profile/fook.ming.ee/viz/In-classEx03-MyFirstStory/Story1">
 <span class="dropdown-text">In-class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex04/In-class_Ex04.html">
 <span class="dropdown-text">In-class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex05/In-class_Ex05.html">
 <span class="dropdown-text">In-class Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/app/profile/fook.ming.ee/viz/In-class_Ex05_Tableau_21/Sheet1">
 <span class="dropdown-text">In-class Exercise 5 - Tableau Heatmap 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/app/profile/fook.ming.ee/viz/In-class_Ex05_Tableau_22/Sheet2">
 <span class="dropdown-text">In-class Exercise 5 - Tableau Heatmap 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://isss608eefm.shinyapps.io/In-class_Ex06/">
 <span class="dropdown-text">In-class Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex07/In-class_Ex07.html">
 <span class="dropdown-text">In-class Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/app/profile/fook.ming.ee/viz/In-class_Ex08_1_17420459719190/SingaporePool">
 <span class="dropdown-text">In-class Exercise 8 - Tableau Map-1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/app/profile/fook.ming.ee/viz/In-class_Ex08_2_17420215082800/SingaporePropertyProjectType2018">
 <span class="dropdown-text">In-class Exercose 8 - Tableau Map-2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html">
 <span class="dropdown-text">Take-home Exercise 2</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#download-and-prepare-the-data" id="toc-download-and-prepare-the-data" class="nav-link" data-scroll-target="#download-and-prepare-the-data"><span class="header-section-number">2</span> Download and Prepare the Data</a>
  <ul class="collapse">
  <li><a href="#load-library-using-pacman" id="toc-load-library-using-pacman" class="nav-link" data-scroll-target="#load-library-using-pacman"><span class="header-section-number">2.1</span> Load Library using Pacman</a></li>
  <li><a href="#load-and-inspect-data" id="toc-load-and-inspect-data" class="nav-link" data-scroll-target="#load-and-inspect-data"><span class="header-section-number">2.2</span> Load and Inspect Data</a></li>
  </ul></li>
  <li><a href="#data-visualization-critique-1-critique-2" id="toc-data-visualization-critique-1-critique-2" class="nav-link" data-scroll-target="#data-visualization-critique-1-critique-2"><span class="header-section-number">3</span> Data Visualization Critique 1 &amp; Critique 2</a>
  <ul class="collapse">
  <li><a href="#critique-1-yearly-merchandise-trade-stacked-bar-chart" id="toc-critique-1-yearly-merchandise-trade-stacked-bar-chart" class="nav-link" data-scroll-target="#critique-1-yearly-merchandise-trade-stacked-bar-chart"><span class="header-section-number">3.1</span> Critique 1: Yearly Merchandise Trade (Stacked Bar Chart)</a>
  <ul class="collapse">
  <li><a href="#pros" id="toc-pros" class="nav-link" data-scroll-target="#pros"><span class="header-section-number">3.1.1</span> Pros:</a></li>
  <li><a href="#cons" id="toc-cons" class="nav-link" data-scroll-target="#cons"><span class="header-section-number">3.1.2</span> Cons:</a></li>
  <li><a href="#recommendation" id="toc-recommendation" class="nav-link" data-scroll-target="#recommendation"><span class="header-section-number">3.1.3</span> Recommendation:</a></li>
  </ul></li>
  <li><a href="#critique-2-merchandise-trade-with-major-trading-partners-bubble-chart" id="toc-critique-2-merchandise-trade-with-major-trading-partners-bubble-chart" class="nav-link" data-scroll-target="#critique-2-merchandise-trade-with-major-trading-partners-bubble-chart"><span class="header-section-number">3.2</span> Critique 2: Merchandise Trade with Major Trading Partners (Bubble Chart)</a>
  <ul class="collapse">
  <li><a href="#pros-1" id="toc-pros-1" class="nav-link" data-scroll-target="#pros-1"><span class="header-section-number">3.2.1</span> Pros:</a></li>
  <li><a href="#cons-1" id="toc-cons-1" class="nav-link" data-scroll-target="#cons-1"><span class="header-section-number">3.2.2</span> Cons:</a></li>
  <li><a href="#recommendation-1" id="toc-recommendation-1" class="nav-link" data-scroll-target="#recommendation-1"><span class="header-section-number">3.2.3</span> Recommendation:</a></li>
  </ul></li>
  <li><a href="#combined-solution-to-critique-1-critique-2" id="toc-combined-solution-to-critique-1-critique-2" class="nav-link" data-scroll-target="#combined-solution-to-critique-1-critique-2"><span class="header-section-number">3.3</span> Combined Solution to Critique 1 &amp; Critique 2:</a></li>
  </ul></li>
  <li><a href="#initial-interactive-sketch-exploring-regional-merchandise-trade-dynamics" id="toc-initial-interactive-sketch-exploring-regional-merchandise-trade-dynamics" class="nav-link" data-scroll-target="#initial-interactive-sketch-exploring-regional-merchandise-trade-dynamics"><span class="header-section-number">4</span> Initial Interactive Sketch: Exploring Regional Merchandise Trade Dynamics</a></li>
  <li><a href="#interactive-year-over-year-trade-analysis-dashboard-shiny-application" id="toc-interactive-year-over-year-trade-analysis-dashboard-shiny-application" class="nav-link" data-scroll-target="#interactive-year-over-year-trade-analysis-dashboard-shiny-application"><span class="header-section-number">5</span> Interactive Year-over-Year Trade Analysis Dashboard (Shiny Application)</a></li>
  <li><a href="#time-series-analysis" id="toc-time-series-analysis" class="nav-link" data-scroll-target="#time-series-analysis"><span class="header-section-number">6</span> Time-series Analysis</a>
  <ul class="collapse">
  <li><a href="#clean-up-data-for-time-series-analysis" id="toc-clean-up-data-for-time-series-analysis" class="nav-link" data-scroll-target="#clean-up-data-for-time-series-analysis"><span class="header-section-number">6.1</span> Clean-up Data for Time-series Analysis</a></li>
  <li><a href="#time-series-analysis-and-forecasting" id="toc-time-series-analysis-and-forecasting" class="nav-link" data-scroll-target="#time-series-analysis-and-forecasting"><span class="header-section-number">6.2</span> Time-Series Analysis and Forecasting</a></li>
  <li><a href="#step-0-setup-the-r-environment" id="toc-step-0-setup-the-r-environment" class="nav-link" data-scroll-target="#step-0-setup-the-r-environment"><span class="header-section-number">6.3</span> Step #0: Setup the R Environment</a>
  <ul class="collapse">
  <li><a href="#import-and-clean-data" id="toc-import-and-clean-data" class="nav-link" data-scroll-target="#import-and-clean-data"><span class="header-section-number">6.3.1</span> <strong>Import and Clean Data:</strong></a></li>
  </ul></li>
  <li><a href="#step-1-define-objectives" id="toc-step-1-define-objectives" class="nav-link" data-scroll-target="#step-1-define-objectives"><span class="header-section-number">6.4</span> Step #1: Define Objectives</a></li>
  <li><a href="#step-2-time-series-eda" id="toc-step-2-time-series-eda" class="nav-link" data-scroll-target="#step-2-time-series-eda"><span class="header-section-number">6.5</span> Step #2: Time-Series EDA</a>
  <ul class="collapse">
  <li><a href="#visualize-and-analyse-the-time-series" id="toc-visualize-and-analyse-the-time-series" class="nav-link" data-scroll-target="#visualize-and-analyse-the-time-series"><span class="header-section-number">6.5.1</span> <strong>Visualize and Analyse the Time-Series</strong></a></li>
  <li><a href="#check-for-stationarity-adf-test-acfpacf-plots" id="toc-check-for-stationarity-adf-test-acfpacf-plots" class="nav-link" data-scroll-target="#check-for-stationarity-adf-test-acfpacf-plots"><span class="header-section-number">6.5.2</span> <strong>Check for Stationarity (ADF Test, ACF/PACF Plots)</strong></a></li>
  <li><a href="#t5---trade-balance-by-regions" id="toc-t5---trade-balance-by-regions" class="nav-link" data-scroll-target="#t5---trade-balance-by-regions"><span class="header-section-number">6.5.3</span> T5 - Trade Balance by Regions</a></li>
  <li><a href="#summary-of-time-series-trends-for-trade-balance-t5" id="toc-summary-of-time-series-trends-for-trade-balance-t5" class="nav-link" data-scroll-target="#summary-of-time-series-trends-for-trade-balance-t5"><span class="header-section-number">6.5.4</span> <strong>Summary of Time-Series Trends for Trade Balance (T5)</strong></a></li>
  <li><a href="#summary-of-adf-test-results-for-trade-balance-t5" id="toc-summary-of-adf-test-results-for-trade-balance-t5" class="nav-link" data-scroll-target="#summary-of-adf-test-results-for-trade-balance-t5"><span class="header-section-number">6.5.5</span> <strong>Summary of ADF Test Results for Trade Balance (T5)</strong></a></li>
  <li><a href="#key-summary-of-acfpacf-analysis-for-trade-balance-t5---america-asia-africa-europe-and-oceania" id="toc-key-summary-of-acfpacf-analysis-for-trade-balance-t5---america-asia-africa-europe-and-oceania" class="nav-link" data-scroll-target="#key-summary-of-acfpacf-analysis-for-trade-balance-t5---america-asia-africa-europe-and-oceania"><span class="header-section-number">6.5.6</span> <strong>Key Summary of ACF/PACF Analysis for Trade Balance (T5) - America, Asia, Africa, Europe and Oceania</strong></a></li>
  </ul></li>
  <li><a href="#step-3-split-data-into-training-testing" id="toc-step-3-split-data-into-training-testing" class="nav-link" data-scroll-target="#step-3-split-data-into-training-testing"><span class="header-section-number">6.6</span> Step #3: <strong>Split Data into Training &amp; Testing</strong></a></li>
  <li><a href="#setp-4-fit-multiple-models-ets-arima-and-prophet" id="toc-setp-4-fit-multiple-models-ets-arima-and-prophet" class="nav-link" data-scroll-target="#setp-4-fit-multiple-models-ets-arima-and-prophet"><span class="header-section-number">6.7</span> <strong>Setp #4: Fit Multiple Models (ETS, ARIMA, and Prophet)</strong></a></li>
  <li><a href="#step-5-calibrate-models-evaluate-accuracy" id="toc-step-5-calibrate-models-evaluate-accuracy" class="nav-link" data-scroll-target="#step-5-calibrate-models-evaluate-accuracy"><span class="header-section-number">6.8</span> <strong>Step #5: Calibrate Models &amp; Evaluate Accuracy</strong></a></li>
  <li><a href="#step-6-select-the-best-model-and-forecast-12-months-ahead" id="toc-step-6-select-the-best-model-and-forecast-12-months-ahead" class="nav-link" data-scroll-target="#step-6-select-the-best-model-and-forecast-12-months-ahead"><span class="header-section-number">6.9</span> <strong>Step #6: Select the Best Model and Forecast 12 Months Ahead</strong></a></li>
  <li><a href="#step-7-visualize-and-save-forecast-results" id="toc-step-7-visualize-and-save-forecast-results" class="nav-link" data-scroll-target="#step-7-visualize-and-save-forecast-results"><span class="header-section-number">6.10</span> <strong>Step #7: Visualize and Save Forecast Results</strong></a>
  <ul class="collapse">
  <li><a href="#model-evaluation-summary" id="toc-model-evaluation-summary" class="nav-link" data-scroll-target="#model-evaluation-summary"><span class="header-section-number">6.10.1</span> Model Evaluation Summary</a></li>
  </ul></li>
  <li><a href="#trade-balance-best-model-for-each-region---12-month-forecast" id="toc-trade-balance-best-model-for-each-region---12-month-forecast" class="nav-link" data-scroll-target="#trade-balance-best-model-for-each-region---12-month-forecast"><span class="header-section-number">6.11</span> Trade Balance: Best Model for Each Region - 12-Month Forecast</a>
  <ul class="collapse">
  <li><a href="#t5-forecasting-i" id="toc-t5-forecasting-i" class="nav-link" data-scroll-target="#t5-forecasting-i"><span class="header-section-number">6.11.1</span> T5 Forecasting I</a></li>
  <li><a href="#t5-forecasting-ii-showing-month-on-month-change" id="toc-t5-forecasting-ii-showing-month-on-month-change" class="nav-link" data-scroll-target="#t5-forecasting-ii-showing-month-on-month-change"><span class="header-section-number">6.11.2</span> T5 Forecasting II (Showing month-on-month change)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">7</span> Conclusion</a></li>
  <li><a href="#future-work" id="toc-future-work" class="nav-link" data-scroll-target="#future-work"><span class="header-section-number">8</span> Future Work</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take Home Exercise 02</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ee Fook Ming </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 8, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 9, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<p><span style="font-size: 44px; font-weight: bold;"><strong>Analyzing Singapore’s International Trade: Trends, Visualization Enhancements, and Time-Series Insights</strong></span></p>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Global trade has undergone significant transformations in recent years, particularly since 2015, influenced by geopolitical events, economic policies, and shifting trade agreements. This analysis explores Singapore’s international trade trends by examining Merchandise Trade by Region/Market data from the Department of Statistics Singapore (DOS).</p>
<p>The objectives of this study are as follows:</p>
<ol type="1">
<li><p>Critique &amp; Improve Trade Visualizations – Analyze three existing trade-related visualizations, assess their strengths and weaknesses, and propose enhanced designs.</p></li>
<li><p>Develop Data-Driven Visual Insights – Utilize R and ggplot2 to recreate the selected visualizations, ensuring a more effective presentation of trade patterns.</p></li>
<li><p>Perform Time-Series Analysis – Apply statistical methods to identify trade trends and forecast future movements using time-series models.</p></li>
</ol>
<p>This study enhances the clarity and effectiveness of trade data visualization, leveraging data analytics techniques to uncover meaningful patterns in Singapore’s international trade.</p>
</section>
<section id="download-and-prepare-the-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Download and Prepare the Data</h1>
<section id="load-library-using-pacman" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="load-library-using-pacman"><span class="header-section-number">2.1</span> Load Library using Pacman</h2>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>               ggplot2, </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>               readxl, </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               writexl,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>               prophet,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>               urca,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>               plotly, </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>               dplyr,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>               tidymodels,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>               timetk,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>               modeltime,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>               lubridate,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>               tseries,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>               ggfortify) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="load-and-inspect-data" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="load-and-inspect-data"><span class="header-section-number">2.2</span> Load and Inspect Data</h2>
<p>This section covers the initial data loading and inspection steps. The datasets (T1, T2, and T3) represent original trade data for Imports, Domestic Exports, and Re-exports, respectively, downloaded directly from the official source. These datasets were manually curated by reorganizing “Region/Country” details into structured columns, establishing a clear relational database format for subsequent analyses. Additional datasets (T4—Total Exports, and T5—Trade Balance) were programmatically derived from these original datasets. A detailed description of further data wrangling, exploratory data analysis (EDA), and preparation specifically for time-series forecasting is provided separately in the Time-Series Analysis section.</p>
<p>The original dataset:<br>
<img src="images/clipboard-371169723.png" class="img-fluid"></p>
<p>The curated dataset:</p>
<p><img src="images/clipboard-3261355965.png" class="img-fluid"></p>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data from 'T1' sheet</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df_T1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/outputFile.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"T1"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display first 10 records</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_T1, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 267
   Region  Country        `2025 Jan` `2024 Dec` `2024 Nov` `2024 Oct` `2024 Sep`
   &lt;chr&gt;   &lt;chr&gt;               &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
 1 America Antigua And B…        0          0          0          0          0  
 2 America Argentina             4         12.5      116.         4.1        8.1
 3 America Bahamas               0          8.1        0          0          0  
 4 America Bermuda               0          0          0          0          0  
 5 America Brazil              870.       587.       942.       640.       787. 
 6 America Canada              268.       213.       222.       324.       236. 
 7 America Chile                12.6        5.7        8          7.1        2.3
 8 America Colombia             17.6       19.4        9.2        2.4        3.3
 9 America Costa Rica           40         72.5       70.2       58         50.1
10 America Cuba                  0.6        0.8        1.3        0.8        1  
# ℹ 260 more variables: `2024 Aug` &lt;dbl&gt;, `2024 Jul` &lt;dbl&gt;, `2024 Jun` &lt;dbl&gt;,
#   `2024 May` &lt;dbl&gt;, `2024 Apr` &lt;dbl&gt;, `2024 Mar` &lt;dbl&gt;, `2024 Feb` &lt;dbl&gt;,
#   `2024 Jan` &lt;dbl&gt;, `2023 Dec` &lt;dbl&gt;, `2023 Nov` &lt;dbl&gt;, `2023 Oct` &lt;dbl&gt;,
#   `2023 Sep` &lt;dbl&gt;, `2023 Aug` &lt;dbl&gt;, `2023 Jul` &lt;dbl&gt;, `2023 Jun` &lt;dbl&gt;,
#   `2023 May` &lt;dbl&gt;, `2023 Apr` &lt;dbl&gt;, `2023 Mar` &lt;dbl&gt;, `2023 Feb` &lt;dbl&gt;,
#   `2023 Jan` &lt;dbl&gt;, `2022 Dec` &lt;dbl&gt;, `2022 Nov` &lt;dbl&gt;, `2022 Oct` &lt;dbl&gt;,
#   `2022 Sep` &lt;dbl&gt;, `2022 Aug` &lt;dbl&gt;, `2022 Jul` &lt;dbl&gt;, `2022 Jun` &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
</section>
<section id="data-visualization-critique-1-critique-2" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Data Visualization Critique 1 &amp; Critique 2</h1>
<p><img src="images/clipboard-1094533279.png" class="img-fluid" width="773"></p>
<section id="critique-1-yearly-merchandise-trade-stacked-bar-chart" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="critique-1-yearly-merchandise-trade-stacked-bar-chart"><span class="header-section-number">3.1</span> Critique 1: Yearly Merchandise Trade (Stacked Bar Chart)</h2>
<section id="pros" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="pros"><span class="header-section-number">3.1.1</span> Pros:</h3>
<ul>
<li><p><strong>Clear Differentiation between Exports and Imports</strong>:<br>
</p>
<p>The visualization clearly distinguishes between imports and total exports (domestic + re-exports combined), facilitating straightforward comparisons.</p></li>
<li><p><strong>Explicit Numerical Labels</strong>:<br>
</p>
<p>Exact numerical values enhance clarity, helping viewers quickly grasp total trade volumes.</p></li>
<li><p><strong>Emphasis on Total Trade Volume</strong>:<br>
</p>
<p>Useful for broadly summarizing annual trade activity, clearly showing overall growth (6.6%).</p></li>
</ul>
</section>
<section id="cons" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="cons"><span class="header-section-number">3.1.2</span> Cons:</h3>
<ul>
<li><p><strong>Missing Trade Balance Representation</strong>:<br>
</p>
<p>Although imports and exports are displayed, the chart lacks explicit trade balance representation. Viewers must manually infer deficits or surpluses.</p></li>
<li><p><strong>Overly Aggregated Export Data</strong>:<br>
</p>
<p>Combining domestic exports and re-exports into total exports reduces analytical clarity. Domestic exports reflect economic production, while re-exports signify trade hub status, two fundamentally different insights that should be separately visualized.</p></li>
<li><p><strong>Lack of Growth Context (Year-on-Year)</strong>:<br>
</p>
<p>Individual growth percentages for domestic exports, re-exports, or imports are not shown explicitly, limiting deeper economic analysis.</p></li>
</ul>
</section>
<section id="recommendation" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="recommendation"><span class="header-section-number">3.1.3</span> Recommendation:</h3>
<ul>
<li><p>Clearly separate domestic exports from re-exports in visuals.</p></li>
<li><p>Explicitly show trade balance (surplus/deficit).</p></li>
<li><p>Include separate YoY growth percentages for clarity.</p></li>
<li><p>Provide interactivity and historical data analysis.</p></li>
</ul>
</section>
</section>
<section id="critique-2-merchandise-trade-with-major-trading-partners-bubble-chart" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="critique-2-merchandise-trade-with-major-trading-partners-bubble-chart"><span class="header-section-number">3.2</span> Critique 2: Merchandise Trade with Major Trading Partners (Bubble Chart)</h2>
<section id="pros-1" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="pros-1"><span class="header-section-number">3.2.1</span> Pros:</h3>
<ul>
<li><p><strong>Clear Representation of Trade Relationships</strong>:<br>
</p>
<p>Effectively shows whether Singapore is a net importer or exporter for each trading partner through bubble positioning above or below the diagonal.</p></li>
<li><p><strong>Visual Highlighting of Key Partners</strong>:<br>
</p>
<p>Bubble sizes effectively depict the relative importance of trading partners, providing intuitive context.</p></li>
<li><p><strong>Contextual Annotations and Notes</strong>:<br>
</p>
<p>Explanatory notes effectively clarify visual encoding and trade balance insights, reducing potential misinterpretation</p></li>
</ul>
</section>
<section id="cons-1" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="cons-1"><span class="header-section-number">3.2.2</span> Cons:</h3>
<ul>
<li><p><strong>Lack of Explicit Trade Balance Values</strong>:<br>
</p>
<p>Although bubble positions implicitly reflect trade balance, explicit numerical trade surplus or deficit values per partner are missing, requiring visual estimation.</p></li>
<li><p><strong>Aggregated Export Figures</strong>:<br>
</p>
<p>As with Critique 1, domestic exports and re-exports are combined, limiting insights into actual domestic economic strength versus logistical trade activity.</p></li>
<li><p><strong>Limited Historical Context or Comparative Trends</strong>:<br>
</p>
<p>Shows only a snapshot for 2024 without comparative historical trends, restricting understanding of evolving trade dynamics.</p></li>
</ul>
</section>
<section id="recommendation-1" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="recommendation-1"><span class="header-section-number">3.2.3</span> Recommendation:</h3>
<ul>
<li><p>Display explicit numerical values of trade surplus/deficit for each partner. Provide regional trade balance view for analysis.</p></li>
<li><p>Consider breaking down exports into domestic and re-exports to deepen analysis.</p></li>
<li><p>Provide historical comparison to highlight changing trade dynamics clearly.</p></li>
<li><p>Provide interactivity</p></li>
</ul>
</section>
</section>
<section id="combined-solution-to-critique-1-critique-2" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="combined-solution-to-critique-1-critique-2"><span class="header-section-number">3.3</span> Combined Solution to Critique 1 &amp; Critique 2:</h2>
<p>The proposed interactive visualization synthesizes strengths from both critiques, effectively resolving their respective limitations by:</p>
<ul>
<li><p>Clearly distinguishing among imports, domestic exports, re-exports, and total exports, addressing previous issues of data aggregation.</p></li>
<li><p>Explicitly visualizing the trade balance, clearly indicating surpluses and deficits, removing the need for viewers to derive this information independently.</p></li>
<li><p>Providing clear year-over-year percentage trends for each trade component, enhancing analytical depth and historical context.</p></li>
<li><p>Incorporating interactive features (tooltips, dynamic annotations, multiple visualization modes such as stacked bar, bubble, and line charts) to boost analytical flexibility and user engagement.</p></li>
<li><p>Focusing on regional-level analysis rather than country-specific detail alone, delivering a holistic, big-picture view of trade dynamics, thus enabling strategic insights at a broader economic scale.</p></li>
</ul>
<p>This approach provides a comprehensive solution, enhancing analytical clarity, interpretability, and overall effectiveness in trade data visualization.</p>
</section>
</section>
<section id="initial-interactive-sketch-exploring-regional-merchandise-trade-dynamics" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Initial Interactive Sketch: Exploring Regional Merchandise Trade Dynamics</h1>
<p><img src="images/clipboard-686280908.png" class="img-fluid"></p>
<p>These two bar charts below serve as initial digital sketches, reflecting the structure of the manual sketch above featuring a moderate degree of interactivity, enabling the user to select specific years for analysis dynamically. Unlike traditional stacked bar charts—which aggregate multiple categories into single bars and can obscure direct comparisons—these separate grouped bar charts distinctly display imports, exports, and re-exports side-by-side. This visual separation makes it significantly easier to immediately see comparative trends across trade categories and regions, quickly highlighting imbalances, patterns, or outliers without requiring viewers to perform visual estimations. The interactive year-selection enhances analytical flexibility, allowing viewers to easily explore and compare annual trade shifts in a more intuitive and insightful manner.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Read Excel (Sheets "T1", "T2", and "T3") and Identify Years</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>df_imports <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/outputFile.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"T1"</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>df_exports <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/outputFile.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"T2"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>df_reexports <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/outputFile.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"T3"</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_imports)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Region"</span>  <span class="co"># Ensure first column is "Region"</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_exports)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Region"</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_reexports)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Region"</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># We assume month columns start from the 3rd column</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>all_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(df_imports)[<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(df_imports)]</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract unique years (first 4 characters of each month column)</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>all_years <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(<span class="fu">str_sub</span>(all_cols, <span class="dv">1</span>, <span class="dv">4</span>)))</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Aggregate Data for Each Year (Imports, Exports, and Re-exports in Millions)</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>year_summary_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>total_values_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (yr <span class="cf">in</span> all_years) {</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Identify columns for the chosen year</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  month_cols <span class="ot">&lt;-</span> all_cols[<span class="fu">grepl</span>(yr, all_cols)]</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sum the imports row-wise (in millions), group by Region, and round</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  df_imports_temp <span class="ot">&lt;-</span> df_imports <span class="sc">%&gt;%</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalImports =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(month_cols)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">TotalImportsRegion =</span> <span class="fu">sum</span>(TotalImports, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalImportsRegion =</span> <span class="fu">round</span>(TotalImportsRegion, <span class="dv">1</span>))</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sum the exports row-wise (in millions), group by Region, and round</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>  df_exports_temp <span class="ot">&lt;-</span> df_exports <span class="sc">%&gt;%</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalExports =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(month_cols)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">TotalExportsRegion =</span> <span class="fu">sum</span>(TotalExports, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalExportsRegion =</span> <span class="fu">round</span>(TotalExportsRegion, <span class="dv">1</span>))</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sum the re-exports row-wise (in millions), group by Region, and round</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>  df_reexports_temp <span class="ot">&lt;-</span> df_reexports <span class="sc">%&gt;%</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalReexports =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(month_cols)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">TotalReexportsRegion =</span> <span class="fu">sum</span>(TotalReexports, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalReexportsRegion =</span> <span class="fu">round</span>(TotalReexportsRegion, <span class="dv">1</span>))</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Merge imports, exports, and re-exports data</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>  df_combined <span class="ot">&lt;-</span> <span class="fu">full_join</span>(df_imports_temp, df_exports_temp, <span class="at">by =</span> <span class="st">"Region"</span>)</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>  df_combined <span class="ot">&lt;-</span> <span class="fu">full_join</span>(df_combined, df_reexports_temp, <span class="at">by =</span> <span class="st">"Region"</span>)</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>  year_summary_list[[yr]] <span class="ot">&lt;-</span> df_combined</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>  total_values_list[[yr]] <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Imports:"</span>, <span class="fu">sum</span>(df_imports_temp<span class="sc">$</span>TotalImportsRegion, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"M&lt;br&gt;"</span>,</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Domestic Exports:"</span>, <span class="fu">sum</span>(df_exports_temp<span class="sc">$</span>TotalExportsRegion, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"M&lt;br&gt;"</span>,</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Re-exports:"</span>, <span class="fu">sum</span>(df_reexports_temp<span class="sc">$</span>TotalReexportsRegion, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"M"</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Build Plotly Figure (One Trace per Year)</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>()</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: define a custom color palette keyed by data type</span></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>color_mapping <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Imports"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, <span class="st">"Exports"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>, <span class="st">"Re-exports"</span> <span class="ot">=</span> <span class="st">"#2ca02c"</span>)</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(all_years)) {</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>  yr <span class="ot">&lt;-</span> all_years[i]</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>  df_year <span class="ot">&lt;-</span> year_summary_list[[yr]]</span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>  fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">data         =</span> df_year,</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">x            =</span> <span class="sc">~</span>Region,</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">y            =</span> <span class="sc">~</span>TotalImportsRegion,</span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">type         =</span> <span class="st">"bar"</span>,</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">name         =</span> <span class="st">"Imports"</span>,</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">color        =</span> <span class="fu">I</span>(color_mapping[<span class="st">"Imports"</span>]),</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">text         =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="fu">round</span>(TotalImportsRegion <span class="sc">/</span> <span class="dv">1000</span>, <span class="dv">1</span>), <span class="st">"k"</span>),</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">textposition =</span> <span class="st">"outside"</span>,</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">visible      =</span> (i <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">data         =</span> df_year,</span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">x            =</span> <span class="sc">~</span>Region,</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">y            =</span> <span class="sc">~</span>TotalExportsRegion,</span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">type         =</span> <span class="st">"bar"</span>,</span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">name         =</span> <span class="st">"Exports"</span>,</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">color        =</span> <span class="fu">I</span>(color_mapping[<span class="st">"Exports"</span>]),</span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">text         =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="fu">round</span>(TotalExportsRegion <span class="sc">/</span> <span class="dv">1000</span>, <span class="dv">1</span>), <span class="st">"k"</span>),</span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">textposition =</span> <span class="st">"outside"</span>,</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">visible      =</span> (i <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(</span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">data         =</span> df_year,</span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">x            =</span> <span class="sc">~</span>Region,</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">y            =</span> <span class="sc">~</span>TotalReexportsRegion,</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">type         =</span> <span class="st">"bar"</span>,</span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">name         =</span> <span class="st">"Re-exports"</span>,</span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">color        =</span> <span class="fu">I</span>(color_mapping[<span class="st">"Re-exports"</span>]),</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">text         =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="fu">round</span>(TotalReexportsRegion <span class="sc">/</span> <span class="dv">1000</span>, <span class="dv">1</span>), <span class="st">"k"</span>),</span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">textposition =</span> <span class="st">"outside"</span>,</span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">visible      =</span> (i <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Dropdown Menu for Year Selection</span></span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a>buttons <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a>n_years <span class="ot">&lt;-</span> <span class="fu">length</span>(all_years)</span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>default_year <span class="ot">&lt;-</span> all_years[<span class="dv">1</span>]</span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a>title_text <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Sum of Imports, Exports &amp; Re-exports by Region in"</span>, default_year, <span class="st">"(in Millions)"</span>)</span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a>annotation_text <span class="ot">&lt;-</span> total_values_list[[default_year]]</span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(all_years)) {</span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a>  visibility <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">3</span> <span class="sc">*</span> n_years)</span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>  visibility[(<span class="dv">3</span> <span class="sc">*</span> i <span class="sc">-</span> <span class="dv">2</span>)<span class="sc">:</span>(<span class="dv">3</span> <span class="sc">*</span> i)] <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>  buttons[[i]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"update"</span>,</span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">list</span>(</span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">visible =</span> visibility),</span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Sum of Imports, Exports &amp; Re-exports by Region in"</span>, all_years[i], <span class="st">"(in Millions)"</span>),</span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>           <span class="at">annotations =</span> <span class="fu">list</span>(</span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="fl">1.1</span>,</span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>               <span class="at">xref =</span> <span class="st">"paper"</span>,</span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>               <span class="at">yref =</span> <span class="st">"paper"</span>,</span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>               <span class="at">text =</span> total_values_list[[all_years[i]]],</span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>               <span class="at">showarrow =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>               <span class="at">align =</span> <span class="st">"left"</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">""</span>))</span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> all_years[i]</span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(</span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> title_text,</span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>  <span class="at">updatemenus =</span> <span class="fu">list</span>(</span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>      <span class="at">active =</span> <span class="dv">0</span>,</span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>      <span class="at">buttons =</span> buttons,</span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="dv">0</span>,</span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="fl">1.1</span></span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="fl">1.05</span>, <span class="at">y =</span> <span class="fl">0.5</span>),</span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>  <span class="at">annotations =</span> <span class="fu">list</span>(</span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fl">1.1</span>,</span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">xref =</span> <span class="st">"paper"</span>,</span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>      <span class="at">yref =</span> <span class="st">"paper"</span>,</span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>      <span class="at">text =</span> annotation_text,</span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>      <span class="at">showarrow =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"left"</span></span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a>  <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">""</span>)</span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the interactive Plotly figure</span></span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-3baa4d7e74c809bc43a6" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3baa4d7e74c809bc43a6">{"x":{"visdat":{"40ec2b1e901e":["function () ","plotlyVisDat"],"40ec6387b7af":["function () ","data"],"40ec632c7535":["function () ","data"],"40ec7bc31d70":["function () ","data"],"40ec46c1e38a":["function () ","data"],"40ec63419d50":["function () ","data"],"40ec68bf2218":["function () ","data"],"40ec5c578b61":["function () ","data"],"40ec777fbca3":["function () ","data"],"40ec6339ae9f":["function () ","data"],"40ec5ff77b9d":["function () ","data"],"40ec70d4b1a3":["function () ","data"],"40ec1bda7e34":["function () ","data"],"40ec25939635":["function () ","data"],"40ec7c6a84d8":["function () ","data"],"40ec3537c0b8":["function () ","data"],"40ec5f4d8b53":["function () ","data"],"40ec5bf62706":["function () ","data"],"40ec7d7c2a14":["function () ","data"],"40ec62aec768":["function () ","data"],"40ec40a5af75":["function () ","data"],"40ec3da24b7b":["function () ","data"],"40ec6a0997d9":["function () ","data"],"40ec1bd05df2":["function () ","data"],"40eccc7c922":["function () ","data"],"40ec1065ddbc":["function () ","data"],"40ecfc06a0d":["function () ","data"],"40ec2172838f":["function () ","data"],"40ec651b3270":["function () ","data"],"40ec5c8c8aeb":["function () ","data"],"40ecef479c5":["function () ","data"],"40ec54667c2e":["function () ","data"],"40ec1462db4c":["function () ","data"],"40ec662b6508":["function () ","data"],"40ec2af6249f":["function () ","data"],"40ec5de58c2":["function () ","data"],"40ec48952b90":["function () ","data"],"40ec395f202a":["function () ","data"],"40ec1438c2d3":["function () ","data"],"40ec1a7eb504":["function () ","data"],"40ec749e2732":["function () ","data"],"40ec3b1f7f6e":["function () ","data"],"40ec10e72d15":["function () ","data"],"40ec3940c65e":["function () ","data"],"40ec4b9f62af":["function () ","data"],"40ec4d07f5f2":["function () ","data"],"40ec45a40a60":["function () ","data"],"40ec14a54858":["function () ","data"],"40ec6f3093fe":["function () ","data"],"40ec5e4441b9":["function () ","data"],"40ec53370908":["function () ","data"],"40ec423216e6":["function () ","data"],"40ec667d77fd":["function () ","data"],"40ec3750b79c":["function () ","data"],"40ec14467f23":["function () ","data"],"40ec2044dd3b":["function () ","data"],"40ec9185d0a":["function () ","data"],"40ec1e844030":["function () ","data"],"40ec7c921ef6":["function () ","data"],"40ec5d2ee85e":["function () ","data"],"40ec3299a31d":["function () ","data"],"40ec4a3dedf":["function () ","data"],"40ec227d04da":["function () ","data"],"40ec3dc995e6":["function () ","data"],"40ec7d904eba":["function () ","data"],"40ecd20d5bd":["function () ","data"],"40ec66b07206":["function () ","data"],"40ec4a0e1c95":["function () ","data"],"40ec6476a02e":["function () ","data"],"40ec280e5f89":["function () ","data"]},"cur_data":"40ec280e5f89","attrs":{"40ec6387b7af":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":true,"inherit":true},"40ec632c7535":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":true,"inherit":true},"40ec7bc31d70":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":true,"inherit":true},"40ec46c1e38a":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec63419d50":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec68bf2218":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5c578b61":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec777fbca3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec6339ae9f":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5ff77b9d":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec70d4b1a3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1bda7e34":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec25939635":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec7c6a84d8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3537c0b8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5f4d8b53":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5bf62706":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec7d7c2a14":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec62aec768":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec40a5af75":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3da24b7b":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec6a0997d9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1bd05df2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40eccc7c922":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1065ddbc":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ecfc06a0d":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec2172838f":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec651b3270":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5c8c8aeb":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ecef479c5":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec54667c2e":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1462db4c":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec662b6508":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec2af6249f":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5de58c2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec48952b90":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec395f202a":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1438c2d3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1a7eb504":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec749e2732":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3b1f7f6e":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec10e72d15":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3940c65e":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4b9f62af":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4d07f5f2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec45a40a60":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec14a54858":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec6f3093fe":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5e4441b9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec53370908":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec423216e6":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec667d77fd":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3750b79c":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec14467f23":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec2044dd3b":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec9185d0a":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1e844030":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec7c921ef6":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5d2ee85e":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3299a31d":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4a3dedf":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec227d04da":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3dc995e6":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec7d904eba":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ecd20d5bd":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec66b07206":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4a0e1c95":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec6476a02e":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec280e5f89":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Re-exports","color":["#2ca02c"],"text":{},"textposition":"outside","visible":false,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Sum of Imports, Exports & Re-exports by Region in 2003 (in Millions)","updatemenus":[{"active":0,"buttons":[{"method":"update","args":[{"visible":[true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2003 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 238071.6 M<br> Domestic Exports: 150556 M<br> Re-exports: 130587.4 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2003"},{"method":"update","args":[{"visible":[false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2004 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 294175.8 M<br> Domestic Exports: 180209.2 M<br> Re-exports: 156565 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2004"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2005 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 334312.9 M<br> Domestic Exports: 207475 M<br> Re-exports: 176208.5 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2005"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2006 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 380839.8 M<br> Domestic Exports: 227390.3 M<br> Re-exports: 206667.8 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2006"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2007 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 398402.9 M<br> Domestic Exports: 234947.9 M<br> Re-exports: 219139.5 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2007"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2008 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 455459 M<br> Domestic Exports: 247726.9 M<br> Re-exports: 233130.6 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2008"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2009 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 358371.9 M<br> Domestic Exports: 200210.7 M<br> Re-exports: 192718.1 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2009"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2010 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 426323.1 M<br> Domestic Exports: 249033.7 M<br> Re-exports: 231676.6 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2010"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2011 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 468287.3 M<br> Domestic Exports: 281728.3 M<br> Re-exports: 241540.8 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2011"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2012 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 482188.9 M<br> Domestic Exports: 285168.8 M<br> Re-exports: 234184.5 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2012"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2013 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 485569.2 M<br> Domestic Exports: 271215.1 M<br> Re-exports: 254287.6 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2013"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2014 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 478580.2 M<br> Domestic Exports: 269778.1 M<br> Re-exports: 256289.2 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2014"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2015 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 423401.5 M<br> Domestic Exports: 237731.8 M<br> Re-exports: 254082.9 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2015"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2016 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 403302.2 M<br> Domestic Exports: 223931.9 M<br> Re-exports: 242978.1 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2016"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2017 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 452100.5 M<br> Domestic Exports: 259300.3 M<br> Re-exports: 255697.1 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2017"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2018 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 500190.3 M<br> Domestic Exports: 281136.2 M<br> Re-exports: 274525.5 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2018"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2019 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 489711.5 M<br> Domestic Exports: 251592 M<br> Re-exports: 280918.5 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2019"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2020 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 453465.6 M<br> Domestic Exports: 234447 M<br> Re-exports: 281193.5 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2020"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2021 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 545881.7 M<br> Domestic Exports: 278975.4 M<br> Re-exports: 335104.5 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2021"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2022 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 655431.3 M<br> Domestic Exports: 329669.9 M<br> Re-exports: 380296.4 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2022"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2023 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 567315.9 M<br> Domestic Exports: 285051.1 M<br> Re-exports: 353348.2 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2023"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2024 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 611357 M<br> Domestic Exports: 286596 M<br> Re-exports: 387907.3 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2024"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true]},{"title":"Sum of Imports, Exports & Re-exports by Region in 2025 (in Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 54745.5 M<br> Domestic Exports: 24672 M<br> Re-exports: 34735.4 M","showarrow":false,"align":"left"}]},{"yaxis":{"title":""}}],"label":"2025"}],"x":0,"y":1.1000000000000001}],"legend":{"x":1.05,"y":0.5},"annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 238071.6 M<br> Domestic Exports: 150556 M<br> Re-exports: 130587.4 M","showarrow":false,"align":"left"}],"yaxis":{"domain":[0,1],"automargin":true,"title":""},"xaxis":{"domain":[0,1],"automargin":true,"title":"Region","type":"category","categoryorder":"array","categoryarray":["Africa","America","Asia","Europe","Oceania"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1440.3,34257.900000000001,162999.70000000001,34843.5,4530.1999999999998],"type":"bar","name":"Imports","text":["1.4k","34.3k","163k","34.8k","4.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":true,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1764.8,28082.5,89337.899999999994,24346.599999999999,7024.1999999999998],"type":"bar","name":"Exports","text":["1.8k","28.1k","89.3k","24.3k","7k"],"textposition":["outside","outside","outside","outside","outside"],"visible":true,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1563.8,12966,99265.399999999994,12855.4,3936.8000000000002],"type":"bar","name":"Re-exports","text":["1.6k","13k","99.3k","12.9k","3.9k"],"textposition":["outside","outside","outside","outside","outside"],"visible":true,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2028,38846,205254,43425.5,4622.3000000000002],"type":"bar","name":"Imports","text":["2k","38.8k","205.3k","43.4k","4.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2313.0999999999999,29964,107418.10000000001,30308.900000000001,10205.1],"type":"bar","name":"Exports","text":["2.3k","30k","107.4k","30.3k","10.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1619.7,15848.299999999999,118439.89999999999,15493.299999999999,5163.8000000000002],"type":"bar","name":"Re-exports","text":["1.6k","15.8k","118.4k","15.5k","5.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2060.1999999999998,43740.400000000001,237298.20000000001,45529.300000000003,5684.8000000000002],"type":"bar","name":"Imports","text":["2.1k","43.7k","237.3k","45.5k","5.7k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2989.4000000000001,30480.900000000001,127226.2,32610.799999999999,14167.700000000001],"type":"bar","name":"Exports","text":["3k","30.5k","127.2k","32.6k","14.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1850.0999999999999,17898.5,135179.20000000001,15699.299999999999,5581.3999999999996],"type":"bar","name":"Re-exports","text":["1.9k","17.9k","135.2k","15.7k","5.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1908.5999999999999,53459.300000000003,269469.20000000001,49395.400000000001,6607.3000000000002],"type":"bar","name":"Imports","text":["1.9k","53.5k","269.5k","49.4k","6.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3668.5,35901.300000000003,137665.20000000001,34668.699999999997,15486.6],"type":"bar","name":"Exports","text":["3.7k","35.9k","137.7k","34.7k","15.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2557.8000000000002,18919.599999999999,161555.89999999999,16304,7330.5],"type":"bar","name":"Re-exports","text":["2.6k","18.9k","161.6k","16.3k","7.3k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1820.3,55410.300000000003,279192.20000000001,56353.800000000003,5626.3000000000002],"type":"bar","name":"Imports","text":["1.8k","55.4k","279.2k","56.4k","5.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4147,39598.400000000001,140938.20000000001,34696.900000000001,15567.4],"type":"bar","name":"Exports","text":["4.1k","39.6k","140.9k","34.7k","15.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2892.9000000000001,15143.6,176845.29999999999,16343.700000000001,7914],"type":"bar","name":"Re-exports","text":["2.9k","15.1k","176.8k","16.3k","7.9k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1901.5999999999999,63848.400000000001,314310.79999999999,67336.399999999994,8061.8000000000002],"type":"bar","name":"Imports","text":["1.9k","63.8k","314.3k","67.3k","8.1k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[7294.1000000000004,38459.900000000001,149645.10000000001,33298.099999999999,19029.700000000001],"type":"bar","name":"Exports","text":["7.3k","38.5k","149.6k","33.3k","19k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2798.5,15570.5,188051.5,18170.400000000001,8539.7000000000007],"type":"bar","name":"Re-exports","text":["2.8k","15.6k","188.1k","18.2k","8.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1411.2,52204,237422.89999999999,60241.699999999997,7092.1000000000004],"type":"bar","name":"Imports","text":["1.4k","52.2k","237.4k","60.2k","7.1k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4785.6000000000004,32153.799999999999,123151.89999999999,26651.799999999999,13467.6],"type":"bar","name":"Exports","text":["4.8k","32.2k","123.2k","26.7k","13.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2871.6999999999998,11756.5,157144.70000000001,13519.9,7425.3000000000002],"type":"bar","name":"Re-exports","text":["2.9k","11.8k","157.1k","13.5k","7.4k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1486.4000000000001,59735.900000000001,292355.09999999998,66602.800000000003,6142.8999999999996],"type":"bar","name":"Imports","text":["1.5k","59.7k","292.4k","66.6k","6.1k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6964.1000000000004,36357.5,155337.70000000001,34326.199999999997,16048.200000000001],"type":"bar","name":"Exports","text":["7k","36.4k","155.3k","34.3k","16k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3565.5,13586,190402.20000000001,15949.299999999999,8173.6000000000004],"type":"bar","name":"Re-exports","text":["3.6k","13.6k","190.4k","15.9k","8.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1527.9000000000001,63803.900000000001,321159.90000000002,75302.5,6493.1000000000004],"type":"bar","name":"Imports","text":["1.5k","63.8k","321.2k","75.3k","6.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[8848.8999999999996,40392,175014.39999999999,37205.800000000003,20267.200000000001],"type":"bar","name":"Exports","text":["8.8k","40.4k","175k","37.2k","20.3k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3462.3000000000002,13057.9,200718.39999999999,15079,9223.2000000000007],"type":"bar","name":"Re-exports","text":["3.5k","13.1k","200.7k","15.1k","9.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2330.1999999999998,63759,331756.5,76408.899999999994,7934.3000000000002],"type":"bar","name":"Imports","text":["2.3k","63.8k","331.8k","76.4k","7.9k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[8858.5,38748.800000000003,179368.10000000001,36607.699999999997,21585.700000000001],"type":"bar","name":"Exports","text":["8.9k","38.7k","179.4k","36.6k","21.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2938.9000000000001,12864.799999999999,194769.29999999999,13888.9,9722.6000000000004],"type":"bar","name":"Re-exports","text":["2.9k","12.9k","194.8k","13.9k","9.7k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3437.5,66237.399999999994,324310,83707.699999999997,7876.6000000000004],"type":"bar","name":"Imports","text":["3.4k","66.2k","324.3k","83.7k","7.9k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[8390.7999999999993,36258,177387.10000000001,28901,20278.200000000001],"type":"bar","name":"Exports","text":["8.4k","36.3k","177.4k","28.9k","20.3k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3199.6999999999998,16970.599999999999,210868.29999999999,14914.9,8334.1000000000004],"type":"bar","name":"Re-exports","text":["3.2k","17k","210.9k","14.9k","8.3k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4356.8999999999996,64816.099999999999,317894.70000000001,80389.600000000006,11122.9],"type":"bar","name":"Imports","text":["4.4k","64.8k","317.9k","80.4k","11.1k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[8575.2000000000007,33988.5,179302.89999999999,28281.400000000001,19630.099999999999],"type":"bar","name":"Exports","text":["8.6k","34k","179.3k","28.3k","19.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2941.8000000000002,15210.200000000001,211666,16639.400000000001,9831.7999999999993],"type":"bar","name":"Re-exports","text":["2.9k","15.2k","211.7k","16.6k","9.8k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2749.0999999999999,56281.300000000003,282350.5,73653.300000000003,8367.2999999999993],"type":"bar","name":"Imports","text":["2.7k","56.3k","282.4k","73.7k","8.4k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6531.6000000000004,30309.099999999999,161415.60000000001,25593.700000000001,13881.799999999999],"type":"bar","name":"Exports","text":["6.5k","30.3k","161.4k","25.6k","13.9k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2374,16273,209410.5,16990.299999999999,9035.1000000000004],"type":"bar","name":"Re-exports","text":["2.4k","16.3k","209.4k","17k","9k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3358.5999999999999,51683.699999999997,273036,68789,6434.8999999999996],"type":"bar","name":"Imports","text":["3.4k","51.7k","273k","68.8k","6.4k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4070,27215.799999999999,152903.89999999999,28815.900000000001,10926.299999999999],"type":"bar","name":"Exports","text":["4.1k","27.2k","152.9k","28.8k","10.9k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1410.5,16724.599999999999,197099.79999999999,19625.099999999999,8118.1000000000004],"type":"bar","name":"Re-exports","text":["1.4k","16.7k","197.1k","19.6k","8.1k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3515,58006.199999999997,307674.20000000001,75714.699999999997,7190.3999999999996],"type":"bar","name":"Imports","text":["3.5k","58k","307.7k","75.7k","7.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[5369.1999999999998,28487.599999999999,183212.5,27994.799999999999,14236.200000000001],"type":"bar","name":"Exports","text":["5.4k","28.5k","183.2k","28k","14.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1437.5999999999999,18941.599999999999,207233.29999999999,20302,7782.6000000000004],"type":"bar","name":"Re-exports","text":["1.4k","18.9k","207.2k","20.3k","7.8k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4701.6000000000004,66578.300000000003,332170,87925.699999999997,8814.7000000000007],"type":"bar","name":"Imports","text":["4.7k","66.6k","332.2k","87.9k","8.8k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6641.8000000000002,36725.400000000001,186371.60000000001,32265.700000000001,19131.700000000001],"type":"bar","name":"Exports","text":["6.6k","36.7k","186.4k","32.3k","19.1k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2033.8,21686.200000000001,219410.29999999999,22661.400000000001,8733.7999999999993],"type":"bar","name":"Re-exports","text":["2k","21.7k","219.4k","22.7k","8.7k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[5478.3000000000002,69718.5,323048.09999999998,81483.600000000006,9983],"type":"bar","name":"Imports","text":["5.5k","69.7k","323k","81.5k","10k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6360.6999999999998,34235.400000000001,166317.79999999999,29190.599999999999,15487.5],"type":"bar","name":"Exports","text":["6.4k","34.2k","166.3k","29.2k","15.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1533.0999999999999,25941.900000000001,219782.29999999999,23989.700000000001,9671.5],"type":"bar","name":"Re-exports","text":["1.5k","25.9k","219.8k","24k","9.7k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[5450.1000000000004,59017.400000000001,312348.70000000001,68665.100000000006,7984.3000000000002],"type":"bar","name":"Imports","text":["5.5k","59k","312.3k","68.7k","8k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[5439.1999999999998,41387,145820.10000000001,29772.400000000001,12028.299999999999],"type":"bar","name":"Exports","text":["5.4k","41.4k","145.8k","29.8k","12k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1506.7,26447.200000000001,219993.79999999999,24898.799999999999,8347],"type":"bar","name":"Re-exports","text":["1.5k","26.4k","220k","24.9k","8.3k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[7578.5,66420.399999999994,379359.09999999998,81325.199999999997,11198.5],"type":"bar","name":"Imports","text":["7.6k","66.4k","379.4k","81.3k","11.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6344.5,38490,185311.5,30205,18624.400000000001],"type":"bar","name":"Exports","text":["6.3k","38.5k","185.3k","30.2k","18.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1399.7,28238,269272,27052.700000000001,9142.1000000000004],"type":"bar","name":"Re-exports","text":["1.4k","28.2k","269.3k","27.1k","9.1k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6463.8000000000002,89385.100000000006,456890.20000000001,89403.199999999997,13289],"type":"bar","name":"Imports","text":["6.5k","89.4k","456.9k","89.4k","13.3k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[11346.299999999999,46925.800000000003,206138.39999999999,35856.300000000003,29403.099999999999],"type":"bar","name":"Exports","text":["11.3k","46.9k","206.1k","35.9k","29.4k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2115.9000000000001,34924.599999999999,302512.79999999999,30227.599999999999,10515.5],"type":"bar","name":"Re-exports","text":["2.1k","34.9k","302.5k","30.2k","10.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4944.3000000000002,85152.699999999997,379775.29999999999,86928.5,10515.1],"type":"bar","name":"Imports","text":["4.9k","85.2k","379.8k","86.9k","10.5k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[9951.7000000000007,46449.800000000003,172559,31681.599999999999,24409],"type":"bar","name":"Exports","text":["10k","46.4k","172.6k","31.7k","24.4k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1863.4000000000001,31664.599999999999,283432.90000000002,26214,10173.299999999999],"type":"bar","name":"Re-exports","text":["1.9k","31.7k","283.4k","26.2k","10.2k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6848,95346.300000000003,407805.70000000001,89635.5,11721.5],"type":"bar","name":"Imports","text":["6.8k","95.3k","407.8k","89.6k","11.7k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[10934.1,43134,180768.70000000001,26979.900000000001,24779.299999999999],"type":"bar","name":"Exports","text":["10.9k","43.1k","180.8k","27k","24.8k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1778.5999999999999,35662.900000000001,315596.79999999999,25436.900000000001,9432.1000000000004],"type":"bar","name":"Re-exports","text":["1.8k","35.7k","315.6k","25.4k","9.4k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[704.79999999999995,6923,39520.599999999999,6931.1999999999998,665.89999999999998],"type":"bar","name":"Imports","text":["0.7k","6.9k","39.5k","6.9k","0.7k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[840.29999999999995,4263.1000000000004,15623.5,2123.3000000000002,1821.8],"type":"bar","name":"Exports","text":["0.8k","4.3k","15.6k","2.1k","1.8k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[197,3110.3000000000002,28465.400000000001,2315.3000000000002,647.39999999999998],"type":"bar","name":"Re-exports","text":["0.2k","3.1k","28.5k","2.3k","0.6k"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"textfont":{"color":"rgba(44,160,44,1)"},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Read Excel (Sheets "T1", "T2", and "T3") and Identify Years</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>df_imports <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/outputFile.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"T1"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>df_exports <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/outputFile.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"T2"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>df_reexports <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/outputFile.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"T3"</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_imports)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Region"</span>  <span class="co"># Ensure first column is "Region"</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_exports)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Region"</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_reexports)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Region"</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co"># We assume month columns start from the 3rd column</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>all_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(df_imports)[<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(df_imports)]</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract unique years (first 4 characters of each month column)</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>all_years <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(<span class="fu">str_sub</span>(all_cols, <span class="dv">1</span>, <span class="dv">4</span>)))</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Aggregate Data for Each Year (Imports and Exports in K Millions)</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>year_summary_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>total_values_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (yr <span class="cf">in</span> all_years) {</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Identify columns for the chosen year</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>  month_cols <span class="ot">&lt;-</span> all_cols[<span class="fu">grepl</span>(yr, all_cols)]</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sum imports by region and convert to K Millions</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>  df_imports_temp <span class="ot">&lt;-</span> df_imports <span class="sc">%&gt;%</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">TotalImportsRegion =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(month_cols)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fl">1e3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalImportsRegion =</span> <span class="fu">round</span>(TotalImportsRegion, <span class="dv">1</span>))</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sum domestic exports and re-exports by region and combine into "Exports"</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>  df_exports_temp <span class="ot">&lt;-</span> df_exports <span class="sc">%&gt;%</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">TotalExportsRegion =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(month_cols)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>  df_reexports_temp <span class="ot">&lt;-</span> df_reexports <span class="sc">%&gt;%</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">TotalReexportsRegion =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(month_cols)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compute total exports (T2 + T3) by region</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>  df_combined_exports <span class="ot">&lt;-</span> df_exports_temp <span class="sc">%&gt;%</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(df_reexports_temp, <span class="at">by =</span> <span class="st">"Region"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalExportsRegion =</span> (TotalExportsRegion <span class="sc">+</span> TotalReexportsRegion) <span class="sc">/</span> <span class="fl">1e3</span>) <span class="sc">%&gt;%</span>  <span class="co"># Convert to K Millions</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Region, TotalExportsRegion) <span class="sc">%&gt;%</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TotalExportsRegion =</span> <span class="fu">round</span>(TotalExportsRegion, <span class="dv">1</span>))</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Merge imports and exports data</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>  df_combined <span class="ot">&lt;-</span> <span class="fu">full_join</span>(df_imports_temp, df_combined_exports, <span class="at">by =</span> <span class="st">"Region"</span>)</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compute national totals for annotation</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>  total_imports <span class="ot">&lt;-</span> <span class="fu">sum</span>(df_combined<span class="sc">$</span>TotalImportsRegion, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>  total_exports <span class="ot">&lt;-</span> <span class="fu">sum</span>(df_combined<span class="sc">$</span>TotalExportsRegion, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store total values per year</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>  total_values_list[[yr]] <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Imports:"</span>, <span class="fu">round</span>(total_imports, <span class="dv">1</span>), <span class="st">"K M&lt;br&gt;"</span>,</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Exports:"</span>, <span class="fu">round</span>(total_exports, <span class="dv">1</span>), <span class="st">"K M"</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>  year_summary_list[[yr]] <span class="ot">&lt;-</span> df_combined</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Build Plotly Figure (Imports vs Exports per Year)</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>()</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Define color mapping</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>color_mapping <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Imports"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, <span class="st">"Exports"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>)</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(all_years)) {</span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>  yr <span class="ot">&lt;-</span> all_years[i]</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>  df_year <span class="ot">&lt;-</span> year_summary_list[[yr]]</span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>  fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(</span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">data         =</span> df_year,</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">x            =</span> <span class="sc">~</span>Region,</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">y            =</span> <span class="sc">~</span>TotalImportsRegion,</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">type         =</span> <span class="st">"bar"</span>,</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">name         =</span> <span class="st">"Imports"</span>,</span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">color        =</span> <span class="fu">I</span>(color_mapping[<span class="st">"Imports"</span>]),</span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">text         =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="fu">round</span>(TotalImportsRegion, <span class="dv">1</span>), <span class="st">"K M"</span>),</span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">textposition =</span> <span class="st">"outside"</span>,</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">visible      =</span> (i <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(</span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">data         =</span> df_year,</span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">x            =</span> <span class="sc">~</span>Region,</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">y            =</span> <span class="sc">~</span>TotalExportsRegion,</span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">type         =</span> <span class="st">"bar"</span>,</span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">name         =</span> <span class="st">"Exports"</span>,</span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">color        =</span> <span class="fu">I</span>(color_mapping[<span class="st">"Exports"</span>]),</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">text         =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="fu">round</span>(TotalExportsRegion, <span class="dv">1</span>), <span class="st">"K M"</span>),</span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">textposition =</span> <span class="st">"outside"</span>,</span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">visible      =</span> (i <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Dropdown Menu for Year Selection</span></span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>buttons <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>n_years <span class="ot">&lt;-</span> <span class="fu">length</span>(all_years)</span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a>default_year <span class="ot">&lt;-</span> all_years[<span class="dv">1</span>]</span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a>title_text <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Imports &amp; Exports by Region in"</span>, default_year, <span class="st">"(in K Millions)"</span>)</span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>annotation_text <span class="ot">&lt;-</span> total_values_list[[default_year]]</span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(all_years)) {</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>  visibility <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">2</span> <span class="sc">*</span> n_years)</span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>  visibility[(<span class="dv">2</span> <span class="sc">*</span> i <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">:</span>(<span class="dv">2</span> <span class="sc">*</span> i)] <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>  buttons[[i]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"update"</span>,</span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">list</span>(</span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">visible =</span> visibility),</span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Imports &amp; Exports by Region in"</span>, all_years[i], <span class="st">"(in K Millions)"</span>),</span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a>           <span class="at">annotations =</span> <span class="fu">list</span>(</span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="fl">1.1</span>,</span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a>               <span class="at">xref =</span> <span class="st">"paper"</span>,</span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a>               <span class="at">yref =</span> <span class="st">"paper"</span>,</span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>               <span class="at">text =</span> total_values_list[[all_years[i]]],</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>               <span class="at">showarrow =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>               <span class="at">align =</span> <span class="st">"left"</span></span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"K Millions"</span>, <span class="at">tickformat =</span> <span class="st">",.0f"</span>)) <span class="co"># FIX Y-AXIS SCALING</span></span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> all_years[i]</span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(</span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> title_text,</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a>  <span class="at">updatemenus =</span> <span class="fu">list</span>(</span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a>      <span class="at">active =</span> <span class="dv">0</span>,</span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a>      <span class="at">buttons =</span> buttons,</span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="dv">0</span>,</span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="fl">1.1</span></span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="fl">1.05</span>, <span class="at">y =</span> <span class="fl">0.5</span>),</span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a>  <span class="at">annotations =</span> <span class="fu">list</span>(</span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fl">1.1</span>,</span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a>      <span class="at">xref =</span> <span class="st">"paper"</span>,</span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a>      <span class="at">yref =</span> <span class="st">"paper"</span>,</span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a>      <span class="at">text =</span> annotation_text,</span>
<span id="cb5-165"><a href="#cb5-165" aria-hidden="true" tabindex="-1"></a>      <span class="at">showarrow =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-166"><a href="#cb5-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"left"</span></span>
<span id="cb5-167"><a href="#cb5-167" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-168"><a href="#cb5-168" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb5-169"><a href="#cb5-169" aria-hidden="true" tabindex="-1"></a>  <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"K Millions"</span>, <span class="at">tickformat =</span> <span class="st">",.0f"</span>) <span class="co"># FIX Y-AXIS SCALING</span></span>
<span id="cb5-170"><a href="#cb5-170" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-171"><a href="#cb5-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-172"><a href="#cb5-172" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the interactive Plotly figure</span></span>
<span id="cb5-173"><a href="#cb5-173" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-62feedd28a78bb7b3194" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-62feedd28a78bb7b3194">{"x":{"visdat":{"40ec6592496b":["function () ","plotlyVisDat"],"40ec671243e5":["function () ","data"],"40ec6027a440":["function () ","data"],"40ec4a909711":["function () ","data"],"40ec5aae0355":["function () ","data"],"40ec565ceff5":["function () ","data"],"40ec6f8dea1e":["function () ","data"],"40ec4e0590c9":["function () ","data"],"40ec4f64a423":["function () ","data"],"40ec58541e8d":["function () ","data"],"40ec7aa1e848":["function () ","data"],"40ec1b990dde":["function () ","data"],"40ec5d5d77f9":["function () ","data"],"40ec236fac52":["function () ","data"],"40ec789a4daa":["function () ","data"],"40ec5a6111c1":["function () ","data"],"40ec1ad4c442":["function () ","data"],"40ec6a0d6d1":["function () ","data"],"40ec297736bd":["function () ","data"],"40ec51aac78f":["function () ","data"],"40ec2313a72c":["function () ","data"],"40ec5f444bb1":["function () ","data"],"40ec7cc58253":["function () ","data"],"40ecaef5724":["function () ","data"],"40ec67420217":["function () ","data"],"40ec1e9768f7":["function () ","data"],"40ec666c3fd1":["function () ","data"],"40ec4cd1e6df":["function () ","data"],"40ec688c61df":["function () ","data"],"40ec586dad18":["function () ","data"],"40ec87f3003":["function () ","data"],"40ec56291950":["function () ","data"],"40ec243cff61":["function () ","data"],"40ec20a24bdd":["function () ","data"],"40ec7f22aae7":["function () ","data"],"40ec3d0264e6":["function () ","data"],"40ec682e5754":["function () ","data"],"40ec3a67813b":["function () ","data"],"40ec61556671":["function () ","data"],"40ec2db8b6a3":["function () ","data"],"40ec39de9ec8":["function () ","data"],"40ec468a7a26":["function () ","data"],"40ec2d5978f8":["function () ","data"],"40ec4d14f90a":["function () ","data"],"40ec1bea270f":["function () ","data"],"40ec29aa581a":["function () ","data"],"40ec6e7e2854":["function () ","data"]},"cur_data":"40ec6e7e2854","attrs":{"40ec671243e5":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":true,"inherit":true},"40ec6027a440":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":true,"inherit":true},"40ec4a909711":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5aae0355":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec565ceff5":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec6f8dea1e":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4e0590c9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4f64a423":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec58541e8d":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec7aa1e848":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1b990dde":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5d5d77f9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec236fac52":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec789a4daa":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5a6111c1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1ad4c442":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec6a0d6d1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec297736bd":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec51aac78f":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec2313a72c":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec5f444bb1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec7cc58253":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ecaef5724":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec67420217":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1e9768f7":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec666c3fd1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4cd1e6df":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec688c61df":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec586dad18":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec87f3003":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec56291950":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec243cff61":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec20a24bdd":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec7f22aae7":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3d0264e6":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec682e5754":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec3a67813b":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec61556671":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec2db8b6a3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec39de9ec8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec468a7a26":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec2d5978f8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec4d14f90a":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec1bea270f":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec29aa581a":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Imports","color":["#1f77b4"],"text":{},"textposition":"outside","visible":false,"inherit":true},"40ec6e7e2854":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","name":"Exports","color":["#ff7f0e"],"text":{},"textposition":"outside","visible":false,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Imports & Exports by Region in 2003 (in K Millions)","updatemenus":[{"active":0,"buttons":[{"method":"update","args":[{"visible":[true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2003 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 238 K M<br> Exports: 281.1 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2003"},{"method":"update","args":[{"visible":[false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2004 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 294.1 K M<br> Exports: 336.8 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2004"},{"method":"update","args":[{"visible":[false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2005 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 334.3 K M<br> Exports: 383.6 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2005"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2006 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 380.9 K M<br> Exports: 434 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2006"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2007 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 398.4 K M<br> Exports: 454 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2007"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2008 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 455.4 K M<br> Exports: 480.9 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2008"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2009 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 358.3 K M<br> Exports: 393 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2009"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2010 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 426.3 K M<br> Exports: 480.6 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2010"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2011 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 468.3 K M<br> Exports: 523.2 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2011"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2012 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 482.2 K M<br> Exports: 519.3 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2012"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2013 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 485.5 K M<br> Exports: 525.5 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2013"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2014 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 478.6 K M<br> Exports: 526.1 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2014"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2015 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 423.5 K M<br> Exports: 491.8 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2015"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2016 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 403.3 K M<br> Exports: 466.8 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2016"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2017 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 452.1 K M<br> Exports: 514.9 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2017"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2018 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 500.2 K M<br> Exports: 555.7 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2018"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2019 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 489.7 K M<br> Exports: 532.6 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2019"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2020 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 453.5 K M<br> Exports: 515.6 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2020"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2021 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 545.9 K M<br> Exports: 614.1 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2021"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false]},{"title":"Imports & Exports by Region in 2022 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 655.5 K M<br> Exports: 710.1 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2022"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false]},{"title":"Imports & Exports by Region in 2023 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 567.3 K M<br> Exports: 638.4 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2023"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false]},{"title":"Imports & Exports by Region in 2024 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 611.2 K M<br> Exports: 674.5 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2024"},{"method":"update","args":[{"visible":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true]},{"title":"Imports & Exports by Region in 2025 (in K Millions)","annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 54.7 K M<br> Exports: 59.4 K M","showarrow":false,"align":"left"}]},{"yaxis":{"title":"K Millions","tickformat":",.0f"}}],"label":"2025"}],"x":0,"y":1.1000000000000001}],"legend":{"x":1.05,"y":0.5},"annotations":[{"x":1.1000000000000001,"y":1,"xref":"paper","yref":"paper","text":"Imports: 238 K M<br> Exports: 281.1 K M","showarrow":false,"align":"left"}],"yaxis":{"domain":[0,1],"automargin":true,"title":"K Millions","tickformat":",.0f"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Region","type":"category","categoryorder":"array","categoryarray":["Africa","America","Asia","Europe","Oceania"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1.3999999999999999,34.299999999999997,163,34.799999999999997,4.5],"type":"bar","name":"Imports","text":["1.4K M","34.3K M","163K M","34.8K M","4.5K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":true,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3.2999999999999998,41,188.59999999999999,37.200000000000003,11],"type":"bar","name":"Exports","text":["3.3K M","41K M","188.6K M","37.2K M","11K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":true,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2,38.799999999999997,205.30000000000001,43.399999999999999,4.5999999999999996],"type":"bar","name":"Imports","text":["2K M","38.8K M","205.3K M","43.4K M","4.6K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3.8999999999999999,45.799999999999997,225.90000000000001,45.799999999999997,15.4],"type":"bar","name":"Exports","text":["3.9K M","45.8K M","225.9K M","45.8K M","15.4K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2.1000000000000001,43.700000000000003,237.30000000000001,45.5,5.7000000000000002],"type":"bar","name":"Imports","text":["2.1K M","43.7K M","237.3K M","45.5K M","5.7K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4.7999999999999998,48.399999999999999,262.39999999999998,48.299999999999997,19.699999999999999],"type":"bar","name":"Exports","text":["4.8K M","48.4K M","262.4K M","48.3K M","19.7K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1.8999999999999999,53.5,269.5,49.399999999999999,6.5999999999999996],"type":"bar","name":"Imports","text":["1.9K M","53.5K M","269.5K M","49.4K M","6.6K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6.2000000000000002,54.799999999999997,299.19999999999999,51,22.800000000000001],"type":"bar","name":"Exports","text":["6.2K M","54.8K M","299.2K M","51K M","22.8K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1.8,55.399999999999999,279.19999999999999,56.399999999999999,5.5999999999999996],"type":"bar","name":"Imports","text":["1.8K M","55.4K M","279.2K M","56.4K M","5.6K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[7,54.700000000000003,317.80000000000001,51,23.5],"type":"bar","name":"Exports","text":["7K M","54.7K M","317.8K M","51K M","23.5K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1.8999999999999999,63.799999999999997,314.30000000000001,67.299999999999997,8.0999999999999996],"type":"bar","name":"Imports","text":["1.9K M","63.8K M","314.3K M","67.3K M","8.1K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[10.1,54,337.69999999999999,51.5,27.600000000000001],"type":"bar","name":"Exports","text":["10.1K M","54K M","337.7K M","51.5K M","27.6K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1.3999999999999999,52.200000000000003,237.40000000000001,60.200000000000003,7.0999999999999996],"type":"bar","name":"Imports","text":["1.4K M","52.2K M","237.4K M","60.2K M","7.1K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[7.7000000000000002,43.899999999999999,280.30000000000001,40.200000000000003,20.899999999999999],"type":"bar","name":"Exports","text":["7.7K M","43.9K M","280.3K M","40.2K M","20.9K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1.5,59.700000000000003,292.39999999999998,66.599999999999994,6.0999999999999996],"type":"bar","name":"Imports","text":["1.5K M","59.7K M","292.4K M","66.6K M","6.1K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[10.5,49.899999999999999,345.69999999999999,50.299999999999997,24.199999999999999],"type":"bar","name":"Exports","text":["10.5K M","49.9K M","345.7K M","50.3K M","24.2K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1.5,63.799999999999997,321.19999999999999,75.299999999999997,6.5],"type":"bar","name":"Imports","text":["1.5K M","63.8K M","321.2K M","75.3K M","6.5K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[12.300000000000001,53.399999999999999,375.69999999999999,52.299999999999997,29.5],"type":"bar","name":"Exports","text":["12.3K M","53.4K M","375.7K M","52.3K M","29.5K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2.2999999999999998,63.799999999999997,331.80000000000001,76.400000000000006,7.9000000000000004],"type":"bar","name":"Imports","text":["2.3K M","63.8K M","331.8K M","76.4K M","7.9K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[11.800000000000001,51.600000000000001,374.10000000000002,50.5,31.300000000000001],"type":"bar","name":"Exports","text":["11.8K M","51.6K M","374.1K M","50.5K M","31.3K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3.3999999999999999,66.200000000000003,324.30000000000001,83.700000000000003,7.9000000000000004],"type":"bar","name":"Imports","text":["3.4K M","66.2K M","324.3K M","83.7K M","7.9K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[11.6,53.200000000000003,388.30000000000001,43.799999999999997,28.600000000000001],"type":"bar","name":"Exports","text":["11.6K M","53.2K M","388.3K M","43.8K M","28.6K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4.4000000000000004,64.799999999999997,317.89999999999998,80.400000000000006,11.1],"type":"bar","name":"Imports","text":["4.4K M","64.8K M","317.9K M","80.4K M","11.1K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[11.5,49.200000000000003,391,44.899999999999999,29.5],"type":"bar","name":"Exports","text":["11.5K M","49.2K M","391K M","44.9K M","29.5K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[2.7000000000000002,56.299999999999997,282.39999999999998,73.700000000000003,8.4000000000000004],"type":"bar","name":"Imports","text":["2.7K M","56.3K M","282.4K M","73.7K M","8.4K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[8.9000000000000004,46.600000000000001,370.80000000000001,42.600000000000001,22.899999999999999],"type":"bar","name":"Exports","text":["8.9K M","46.6K M","370.8K M","42.6K M","22.9K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3.3999999999999999,51.700000000000003,273,68.799999999999997,6.4000000000000004],"type":"bar","name":"Imports","text":["3.4K M","51.7K M","273K M","68.8K M","6.4K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[5.5,43.899999999999999,350,48.399999999999999,19],"type":"bar","name":"Exports","text":["5.5K M","43.9K M","350K M","48.4K M","19K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[3.5,58,307.69999999999999,75.700000000000003,7.2000000000000002],"type":"bar","name":"Imports","text":["3.5K M","58K M","307.7K M","75.7K M","7.2K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6.7999999999999998,47.399999999999999,390.39999999999998,48.299999999999997,22],"type":"bar","name":"Exports","text":["6.8K M","47.4K M","390.4K M","48.3K M","22K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4.7000000000000002,66.599999999999994,332.19999999999999,87.900000000000006,8.8000000000000007],"type":"bar","name":"Imports","text":["4.7K M","66.6K M","332.2K M","87.9K M","8.8K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[8.6999999999999993,58.399999999999999,405.80000000000001,54.899999999999999,27.899999999999999],"type":"bar","name":"Exports","text":["8.7K M","58.4K M","405.8K M","54.9K M","27.9K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[5.5,69.700000000000003,323,81.5,10],"type":"bar","name":"Imports","text":["5.5K M","69.7K M","323K M","81.5K M","10K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[7.9000000000000004,60.200000000000003,386.10000000000002,53.200000000000003,25.199999999999999],"type":"bar","name":"Exports","text":["7.9K M","60.2K M","386.1K M","53.2K M","25.2K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[5.5,59,312.30000000000001,68.700000000000003,8],"type":"bar","name":"Imports","text":["5.5K M","59K M","312.3K M","68.7K M","8K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6.9000000000000004,67.799999999999997,365.80000000000001,54.700000000000003,20.399999999999999],"type":"bar","name":"Exports","text":["6.9K M","67.8K M","365.8K M","54.7K M","20.4K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[7.5999999999999996,66.400000000000006,379.39999999999998,81.299999999999997,11.199999999999999],"type":"bar","name":"Imports","text":["7.6K M","66.4K M","379.4K M","81.3K M","11.2K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[7.7000000000000002,66.700000000000003,454.60000000000002,57.299999999999997,27.800000000000001],"type":"bar","name":"Exports","text":["7.7K M","66.7K M","454.6K M","57.3K M","27.8K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6.5,89.400000000000006,456.89999999999998,89.400000000000006,13.300000000000001],"type":"bar","name":"Imports","text":["6.5K M","89.4K M","456.9K M","89.4K M","13.3K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[13.5,81.900000000000006,508.69999999999999,66.099999999999994,39.899999999999999],"type":"bar","name":"Exports","text":["13.5K M","81.9K M","508.7K M","66.1K M","39.9K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[4.9000000000000004,85.200000000000003,379.80000000000001,86.900000000000006,10.5],"type":"bar","name":"Imports","text":["4.9K M","85.2K M","379.8K M","86.9K M","10.5K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[11.800000000000001,78.099999999999994,456,57.899999999999999,34.600000000000001],"type":"bar","name":"Exports","text":["11.8K M","78.1K M","456K M","57.9K M","34.6K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[6.7999999999999998,95.299999999999997,407.80000000000001,89.599999999999994,11.699999999999999],"type":"bar","name":"Imports","text":["6.8K M","95.3K M","407.8K M","89.6K M","11.7K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[12.699999999999999,78.799999999999997,496.39999999999998,52.399999999999999,34.200000000000003],"type":"bar","name":"Exports","text":["12.7K M","78.8K M","496.4K M","52.4K M","34.2K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[0.69999999999999996,6.9000000000000004,39.5,6.9000000000000004,0.69999999999999996],"type":"bar","name":"Imports","text":["0.7K M","6.9K M","39.5K M","6.9K M","0.7K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"color":"rgba(31,119,180,1)"},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Africa","America","Asia","Europe","Oceania"],"y":[1,7.4000000000000004,44.100000000000001,4.4000000000000004,2.5],"type":"bar","name":"Exports","text":["1K M","7.4K M","44.1K M","4.4K M","2.5K M"],"textposition":["outside","outside","outside","outside","outside"],"visible":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"color":"rgba(255,127,14,1)"},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="interactive-year-over-year-trade-analysis-dashboard-shiny-application" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Interactive Year-over-Year Trade Analysis Dashboard (Shiny Application)</h1>
<p>This fully interactive Shiny application is designed as a comprehensive solution addressing the previously identified limitations in the initial static visualizations (Critique 1: yearly stacked bars; Critique 2: bubble charts by trading partner). Unlike earlier visuals, this dynamic dashboard distinctly separates Imports, Domestic Exports, Re-exports, Total Exports, and explicitly calculates the Trade Balance, delivering immediate analytical clarity.</p>
<p>It features robust user-driven interactivity, allowing customization by:</p>
<ul>
<li><p>Region: Users can quickly pivot from global to targeted regional analysis, obtaining both big-picture insights and specific regional trade patterns.</p></li>
<li><p>Quarter: Facilitates detailed seasonal analysis, helping to identify periodic economic fluctuations and trends.</p></li>
<li><p>Start and End Dates: Offers flexibility in timeframe selection, enabling in-depth historical trend analysis or shorter-term comparisons.</p></li>
<li><p>Year-over-Year (YoY): Explicitly displays YoY percentage changes across categories, allowing users to easily identify growth or decline dynamics that were previously obscured in static visualizations.</p></li>
</ul>
<p>Additionally, the integrated responsive data table adjusts seamlessly based on user selections, providing instant and precise numerical context alongside the visual charts. This enhances analytical rigor and interpretability, eliminating the ambiguity of visually estimating figures and manually calculating trade balances.</p>
<p>Overall, this Shiny dashboard comprehensively resolves previous visualization shortcomings, providing an intuitive, interactive, and insightful analytical tool that greatly facilitates strategic decision-making, economic forecasting, and clear communication of trade insights.</p>
<div class="cell" data-fig-length="12">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>tags<span class="sc">$</span><span class="fu">iframe</span>(<span class="at">src=</span><span class="st">"https://isss608eefm.shinyapps.io/Take-home_Ex02_Shiny_1/"</span>, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">width=</span><span class="st">"100%"</span>, <span class="at">height=</span><span class="st">"600px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<iframe src="https://isss608eefm.shinyapps.io/Take-home_Ex02_Shiny_1/" width="100%" height="600px"></iframe>
</div>
</div>
<p><a href="https://isss608eefm.shinyapps.io/Take-home_Ex02_Shiny_1"><strong>Link to the Shiny App Daskboard</strong></a></p>
</section>
<section id="time-series-analysis" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Time-series Analysis</h1>
<section id="clean-up-data-for-time-series-analysis" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="clean-up-data-for-time-series-analysis"><span class="header-section-number">6.1</span> Clean-up Data for Time-series Analysis</h2>
<p>This R script processes trade data from Excel sheets (“T1”, “T2”, and “T3”) by standardizing date formats, cleaning column headers to clearly reflect country or region names, and ensuring consistent naming conventions (e.g., renaming columns to “Date” and “All”). It utilizes libraries like <code>readxl</code>, <code>dplyr</code>, <code>stringr</code>, <code>lubridate</code>, and <code>writexl</code> to handle data extraction, cleaning, and exporting tasks efficiently. The final output, saved in a new Excel file (<code>ts_prep_final.xlsx</code>), provides cleaned and structured datasets ready for further analysis and visualization.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to process each sheet</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>process_sheet <span class="ot">&lt;-</span> <span class="cf">function</span>(sheet_name) {</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/ts_prep.xlsx"</span>, <span class="at">sheet =</span> sheet_name)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename first column to Date</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(df)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Date"</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert first column to Date format using lubridate</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">parse_date_time</span>(df<span class="sc">$</span>Date, <span class="at">orders =</span> <span class="st">"Y b"</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract country/region names from column headers</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  extract_region_country <span class="ot">&lt;-</span> <span class="cf">function</span>(column_name) {</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    parts <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">str_split</span>(column_name, <span class="st">"-&gt;"</span>))</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    parts <span class="ot">&lt;-</span> <span class="fu">trimws</span>(parts)  <span class="co"># Remove extra spaces</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    last_part <span class="ot">&lt;-</span> <span class="fu">tail</span>(parts, <span class="dv">1</span>)  <span class="co"># Get the last part</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    last_part <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(last_part, <span class="st">"</span><span class="sc">\\</span><span class="st">(.*</span><span class="sc">\\</span><span class="st">)"</span>)  <span class="co"># Correct escaping for parentheses</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    last_part <span class="ot">&lt;-</span> <span class="fu">str_trim</span>(last_part)  <span class="co"># Remove trailing spaces</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(last_part)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(df)[<span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="fu">colnames</span>(df)[<span class="sc">-</span><span class="dv">1</span>], extract_region_country)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update second column name to "All"</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(df)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"All"</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Process sheets T1, T2, and T3</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>df_T1 <span class="ot">&lt;-</span> <span class="fu">process_sheet</span>(<span class="st">"T1"</span>)</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>df_T2 <span class="ot">&lt;-</span> <span class="fu">process_sheet</span>(<span class="st">"T2"</span>)</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>df_T3 <span class="ot">&lt;-</span> <span class="fu">process_sheet</span>(<span class="st">"T3"</span>)</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Write to ts_prep_final.xlsx with respective sheet names</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(<span class="fu">list</span>(<span class="at">T1 =</span> df_T1, <span class="at">T2 =</span> df_T2, <span class="at">T3 =</span> df_T3), <span class="st">"data/ts_prep_final.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="time-series-analysis-and-forecasting" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="time-series-analysis-and-forecasting"><span class="header-section-number">6.2</span> Time-Series Analysis and Forecasting</h2>
<p>Time-series analysis plays a crucial role in understanding historical trends and making accurate forecasts for decision-making. This section focuses on analyzing and forecasting Singapore’s merchandise trade using structured time-series data extracted from Singstats. The dataset consists of three key trade components:</p>
<ul>
<li><p>T1: Imports</p></li>
<li><p>T2: Domestic Exports</p></li>
<li><p>T3: Re-Exports</p></li>
</ul>
<p>To enhance the analysis, two additional datasets have been derived:</p>
<ul>
<li><p>T4: Total Exports (T2 + T3)</p></li>
<li><p>T5: Trade Balance (Total Exports - Imports)</p></li>
</ul>
<p>These datasets are stored in an Excel file, <code>ts_prep_final_2.xlsx</code>, with each component as a separate worksheet. The data has been transformed into a pivot-long format, making it suitable for time-series forecasting.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data extracted from Singstats</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="st">"data/ts_prep_final.xlsx"</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>df_T1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T1"</span>) <span class="co"># Imports</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>df_T2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T2"</span>) <span class="co"># Domestic Exports</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>df_T3 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T3"</span>) <span class="co"># Re-Exports</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure the Date column is in Date format</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_T1)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Date"</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_T2)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Date"</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_T3)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Date"</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>df_T1<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T1<span class="sc">$</span>Date)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>df_T2<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T2<span class="sc">$</span>Date)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>df_T3<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T3<span class="sc">$</span>Date)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure numeric data and handle missing values</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>df_T1 <span class="ot">&lt;-</span> df_T1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Date, as.numeric, <span class="at">.names =</span> <span class="st">"{.col}"</span>))</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>df_T2 <span class="ot">&lt;-</span> df_T2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Date, as.numeric, <span class="at">.names =</span> <span class="st">"{.col}"</span>))</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>df_T3 <span class="ot">&lt;-</span> df_T3 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Date, as.numeric, <span class="at">.names =</span> <span class="st">"{.col}"</span>))</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce T4: Total Exports (Domestic Exports + Re-Exports)</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>df_T4 <span class="ot">&lt;-</span> df_T2 <span class="sc">%&gt;%</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df_T3, <span class="at">by =</span> <span class="st">"Date"</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_T2"</span>, <span class="st">"_T3"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Date, <span class="sc">~</span> .x <span class="sc">+</span> <span class="fu">get</span>(<span class="fu">sub</span>(<span class="st">"_T2"</span>, <span class="st">"_T3"</span>, <span class="fu">cur_column</span>())), <span class="at">.names =</span> <span class="st">"{.col}"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date, <span class="fu">ends_with</span>(<span class="st">"_T2"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">sub</span>(<span class="st">"_T2"</span>, <span class="st">""</span>, .), <span class="fu">ends_with</span>(<span class="st">"_T2"</span>))</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce T5: Trade Balance (Total Exports - Imports)</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>df_T5 <span class="ot">&lt;-</span> df_T4 <span class="sc">%&gt;%</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df_T1, <span class="at">by =</span> <span class="st">"Date"</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_T4"</span>, <span class="st">"_T1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Date, <span class="sc">~</span> .x <span class="sc">-</span> <span class="fu">get</span>(<span class="fu">sub</span>(<span class="st">"_T4"</span>, <span class="st">"_T1"</span>, <span class="fu">cur_column</span>())), <span class="at">.names =</span> <span class="st">"{.col}"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date, <span class="fu">ends_with</span>(<span class="st">"_T4"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">sub</span>(<span class="st">"_T4"</span>, <span class="st">""</span>, .), <span class="fu">ends_with</span>(<span class="st">"_T4"</span>))</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the final structured data with new sheets</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>ts_prep_final_2_path <span class="ot">&lt;-</span> <span class="st">"data/ts_prep_final_2.xlsx"</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(<span class="fu">list</span>(</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">T1 =</span> df_T1,</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">T2 =</span> df_T2,</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">T3 =</span> df_T3,</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">T4 =</span> df_T4,</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">T5 =</span> df_T5</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>), ts_prep_final_2_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The R script processes merchandise trade data by importing Excel sheets on imports, domestic exports, and re-exports, then standardizing date formats and ensuring numeric consistency across datasets. It computes two key derived metrics—<strong>total exports</strong> (domestic exports plus re-exports) and <strong>trade balance</strong> (total exports minus imports)—to clarify trade surpluses or deficits. The final structured datasets are saved into a single Excel file (<code>ts_prep_final_2.xlsx</code>), clearly organized and ready for detailed regional analysis, visualization, and strategic insight.</p>
</section>
<section id="step-0-setup-the-r-environment" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="step-0-setup-the-r-environment"><span class="header-section-number">6.3</span> Step #0: Setup the R Environment</h2>
<ul>
<li><p>Install and load the required R packages required for time-series tasks (<code>tidyverse</code>, <code>timetk</code>, <code>modeltime</code>, etc.).</p></li>
<li><p>These libraries help with data manipulation, visualization, stationarity testing, and forecasting.</p></li>
</ul>
<section id="import-and-clean-data" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="import-and-clean-data"><span class="header-section-number">6.3.1</span> <strong>Import and Clean Data:</strong></h3>
<ul>
<li><p>Load the dataset (e.g., from an Excel file).</p></li>
<li><p>Rename the date column and convert it to Date format.</p></li>
<li><p>Ensure numeric data types, handling missing or infinite values.</p></li>
<li><p>The data wrangling process described above are done to produce ts_prep_final.xlsx and ts_prep_final_2.xlsx</p></li>
</ul>
</section>
</section>
<section id="step-1-define-objectives" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="step-1-define-objectives"><span class="header-section-number">6.4</span> Step #1: Define Objectives</h2>
<p>We will perform time-series analysis and forecasting for the following (selectively):</p>
<ul>
<li>T1 (Imports) → Forecast future import trends</li>
<li>T2 (Domestic Exports) → Analyze export growth patterns</li>
<li>T3 (Re-Exports) → Predict re-export fluctuations</li>
<li>T4 (Total Exports) → Identify overall export performance</li>
<li>T5 (Trade Balance) → Forecast trade surplus/deficit</li>
</ul>
</section>
<section id="step-2-time-series-eda" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="step-2-time-series-eda"><span class="header-section-number">6.5</span> Step #2: Time-Series EDA</h2>
<p>Before forecasting, historical trends are analysed:</p>
<section id="visualize-and-analyse-the-time-series" class="level3" data-number="6.5.1">
<h3 data-number="6.5.1" class="anchored" data-anchor-id="visualize-and-analyse-the-time-series"><span class="header-section-number">6.5.1</span> <strong>Visualize and Analyse the Time-Series</strong></h3>
<ul>
<li><p>Identify seasonality &amp; trends</p></li>
<li><p>Detect anomalies &amp; missing values</p></li>
<li><p>Plot the raw time series to observe trends, seasonality, and anomalies.</p></li>
<li><p>Look for patterns, such as periodic spikes or increasing trends.</p></li>
</ul>
</section>
<section id="check-for-stationarity-adf-test-acfpacf-plots" class="level3" data-number="6.5.2">
<h3 data-number="6.5.2" class="anchored" data-anchor-id="check-for-stationarity-adf-test-acfpacf-plots"><span class="header-section-number">6.5.2</span> <strong>Check for Stationarity (ADF Test, ACF/PACF Plots)</strong></h3>
<ul>
<li><p>ADF Test: Determines if the data is stationary or non-stationary.</p>
<ul>
<li><p>If p-value &gt; 0.05, the data is non-stationary.</p></li>
<li><p>If p-value &lt; 0.05, the data is stationary.</p></li>
</ul></li>
<li><p>ACF/PACF plots: Show how past values influence future values.</p>
<ul>
<li>Helps determine AR (AutoRegressive) and MA (Moving Average) components for ARIMA models.</li>
</ul></li>
</ul>
</section>
<section id="t5---trade-balance-by-regions" class="level3" data-number="6.5.3">
<h3 data-number="6.5.3" class="anchored" data-anchor-id="t5---trade-balance-by-regions"><span class="header-section-number">6.5.3</span> T5 - Trade Balance by Regions</h3>
<p>The <strong>T5 – Trade Balance by Regions</strong> dataset is specifically used for time-series analysis and forecasting because it captures the net economic position (surplus or deficit) of trade activities, offering clear insights into a region’s trade health and overall economic sustainability. Unlike datasets showing only exports or imports separately, analyzing trade balance directly reveals underlying economic dynamics, trends, and vulnerabilities at a regional level. This makes it particularly valuable for forecasting, strategic planning, and policy-making, as changes in trade balance directly impact economic growth, currency valuation, and competitiveness.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data from ts_prep_final_2.xlsx</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="st">"data/ts_prep_final_2.xlsx"</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>df_T1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T1"</span>) <span class="co"># Imports</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>df_T2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T2"</span>) <span class="co"># Domestic Exports</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>df_T3 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T3"</span>) <span class="co"># Re-Exports</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>df_T4 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T4"</span>) <span class="co"># Total Exports</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>df_T5 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> <span class="st">"T5"</span>) <span class="co"># Trade Balance</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure the Date column is in Date format</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_T1)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Date"</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>df_T1<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T1<span class="sc">$</span>Date)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>df_T2<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T2<span class="sc">$</span>Date)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>df_T3<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T3<span class="sc">$</span>Date)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>df_T4<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T4<span class="sc">$</span>Date)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>df_T5<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_T5<span class="sc">$</span>Date)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Focus on specific regions: America, Asia, Africa, Europe, Oceania</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>desired_regions <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"America"</span>, <span class="st">"Asia"</span>, <span class="st">"Africa"</span>, <span class="st">"Europe"</span>, <span class="st">"Oceania"</span>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>df_T1 <span class="ot">&lt;-</span> df_T1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Date, <span class="fu">all_of</span>(desired_regions)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>df_T2 <span class="ot">&lt;-</span> df_T2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Date, <span class="fu">all_of</span>(desired_regions)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>df_T3 <span class="ot">&lt;-</span> df_T3 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Date, <span class="fu">all_of</span>(desired_regions)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>df_T4 <span class="ot">&lt;-</span> df_T4 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Date, <span class="fu">all_of</span>(desired_regions)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>df_T5 <span class="ot">&lt;-</span> df_T5 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Date, <span class="fu">all_of</span>(desired_regions)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize time-series data for each region (Trade Balance - T5)</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (region <span class="cf">in</span> desired_regions) {</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">ggplot</span>(df_T5, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> .data[[region]])) <span class="sc">+</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Time-Series Plot for"</span>, region, <span class="st">"(Trade Balance)"</span>),</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Value"</span>) <span class="sc">+</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>          <span class="fu">theme_minimal</span>())</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-8-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-8-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-8-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="summary-of-time-series-trends-for-trade-balance-t5" class="level3" data-number="6.5.4">
<h3 data-number="6.5.4" class="anchored" data-anchor-id="summary-of-time-series-trends-for-trade-balance-t5"><span class="header-section-number">6.5.4</span> <strong>Summary of Time-Series Trends for Trade Balance (T5)</strong></h3>
<section id="general-observations" class="level4" data-number="6.5.4.1">
<h4 data-number="6.5.4.1" class="anchored" data-anchor-id="general-observations"><span class="header-section-number">6.5.4.1</span> General Observations</h4>
<ul>
<li><p>Highly Volatile Trends: All regions show significant fluctuations in trade balance over time.</p></li>
<li><p>Short-Term Spikes &amp; Dips: There are frequent sharp increases and decreases, indicating unstable trade balances.</p></li>
<li><p>Clear Structural Changes: Noticeable trend shifts around 2019-2021, likely influenced by global economic events (e.g., COVID-19).</p></li>
</ul>
</section>
<section id="region-specific-trends" class="level4" data-number="6.5.4.2">
<h4 data-number="6.5.4.2" class="anchored" data-anchor-id="region-specific-trends"><span class="header-section-number">6.5.4.2</span> Region-Specific Trends</h4>
<ul>
<li><p>America:</p>
<ul>
<li><p>Shows a declining trend in trade balance, frequently crossing negative values (trade deficit).</p></li>
<li><p>Large spikes post-2020, suggesting external trade shocks.</p></li>
</ul></li>
<li><p>Asia:</p>
<ul>
<li><p>Strong upward trend in trade balance.</p></li>
<li><p>Some large fluctuations but overall positive trade balance.</p></li>
</ul></li>
<li><p>Africa:</p>
<ul>
<li><p>Sharp increases and decreases, indicating inconsistent trade.</p></li>
<li><p>Spikes around 2008 and 2015, suggesting trade policy or economic shifts.</p></li>
</ul></li>
<li><p>Europe:</p>
<ul>
<li><p>Noticeable long-term trade deficit, with frequent drops below zero.</p></li>
<li><p>Sharp declines post-2020, possibly due to changing trade agreements.</p></li>
</ul></li>
<li><p>Oceania:</p>
<ul>
<li>Fluctuates around a stable range, but post-2020 increase suggests a potential improvement in trade balance.</li>
</ul></li>
</ul>
</section>
<section id="key-insights" class="level4" data-number="6.5.4.3">
<h4 data-number="6.5.4.3" class="anchored" data-anchor-id="key-insights"><span class="header-section-number">6.5.4.3</span> Key Insights</h4>
<ul>
<li><p>America and Europe show more frequent trade deficits, while Asia consistently maintains a surplus.</p></li>
<li><p>Sharp fluctuations indicate external shocks, policy changes, or economic instability.</p></li>
<li><p>Prophet or ETS models might be better suited to handle the non-stationary nature of these trends.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform ADF test for each region (Trade Balance - T5)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>adf_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (region <span class="cf">in</span> desired_regions) {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  adf_results[[region]] <span class="ot">&lt;-</span> <span class="fu">adf.test</span>(df_T5[[region]], <span class="at">alternative =</span> <span class="st">"stationary"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"ADF Test for"</span>, region, <span class="st">"p-value:"</span>, adf_results[[region]]<span class="sc">$</span>p.value))</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ADF Test for America p-value: 0.163591417035453"
[1] "ADF Test for Asia p-value: 0.0835262756668348"
[1] "ADF Test for Africa p-value: 0.341202534258552"
[1] "ADF Test for Europe p-value: 0.179668541447346"
[1] "ADF Test for Oceania p-value: 0.248860426175437"</code></pre>
</div>
</div>
</section>
</section>
<section id="summary-of-adf-test-results-for-trade-balance-t5" class="level3" data-number="6.5.5">
<h3 data-number="6.5.5" class="anchored" data-anchor-id="summary-of-adf-test-results-for-trade-balance-t5"><span class="header-section-number">6.5.5</span> <strong>Summary of ADF Test Results for Trade Balance (T5)</strong></h3>
<p>The Augmented Dickey-Fuller (ADF) test was conducted for each region to check for stationarity in Trade Balance (T5).</p>
<p><strong>ADF Test Results &amp; Interpretation</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Region</th>
<th>p-value</th>
<th>Conclusion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>America</strong></td>
<td>0.1636</td>
<td>Non-stationary (p &gt; 0.05)</td>
</tr>
<tr class="even">
<td><strong>Asia</strong></td>
<td>0.0835</td>
<td>Non-stationary (p &gt; 0.05)</td>
</tr>
<tr class="odd">
<td><strong>Africa</strong></td>
<td>0.3410</td>
<td>Non-stationary (p &gt; 0.05)</td>
</tr>
<tr class="even">
<td><strong>Europe</strong></td>
<td>0.1797</td>
<td>Non-stationary (p &gt; 0.05)</td>
</tr>
<tr class="odd">
<td><strong>Oceania</strong></td>
<td>0.2489</td>
<td>Non-stationary (p &gt; 0.05)</td>
</tr>
</tbody>
</table>
<p><strong>Key Takeaways</strong></p>
<ul>
<li><p>All regions are non-stationary (p-values &gt; 0.05).</p></li>
<li><p>Differencing (d=1) is needed to transform the data into a stationary series.</p></li>
<li><p>ARIMA may require differencing, or we can opt for ETS or Prophet, which handle trends naturally.</p></li>
</ul>
<p><strong>Next Steps</strong></p>
<ul>
<li><p>Apply first-order differencing (d=1) and re-check ADF.</p></li>
<li><p>Re-run ACF/PACF to confirm model suitability.</p></li>
<li><p>Proceed with ETS, ARIMA, or Prophet based on results.</p></li>
</ul>
<section id="apply-differencing-if-needed" class="level4" data-number="6.5.5.1">
<h4 data-number="6.5.5.1" class="anchored" data-anchor-id="apply-differencing-if-needed"><span class="header-section-number">6.5.5.1</span> <strong>Apply Differencing if Needed</strong></h4>
<ul>
<li><p>If data is non-stationary, apply differencing (<code>diff()</code>) to remove trends.</p></li>
<li><p>Check stationarity again after differencing (re-run the ADF test).</p></li>
<li><p>Differencing makes the data suitable for ARIMA models, otherwise other models will be deployed based on evaluation whereby the best most accurate and agile model will be chosen.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot ACF and PACF for each region (Trade Balance - T5)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (region <span class="cf">in</span> desired_regions) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">autoplot</span>(<span class="fu">Acf</span>(df_T5[[region]], <span class="at">lag.max =</span> <span class="dv">36</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"ACF for"</span>, region)))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">autoplot</span>(<span class="fu">Pacf</span>(df_T5[[region]], <span class="at">lag.max =</span> <span class="dv">36</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"PACF for"</span>, region)))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-10-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="key-summary-of-acfpacf-analysis-for-trade-balance-t5---america-asia-africa-europe-and-oceania" class="level3" data-number="6.5.6">
<h3 data-number="6.5.6" class="anchored" data-anchor-id="key-summary-of-acfpacf-analysis-for-trade-balance-t5---america-asia-africa-europe-and-oceania"><span class="header-section-number">6.5.6</span> <strong>Key Summary of ACF/PACF Analysis for Trade Balance (T5) - America, Asia, Africa, Europe and Oceania</strong></h3>
<p>They are similar in that all of their ACF/PACF plots show the same general patterns.</p>
<ul>
<li><p>ACF shows slow decay, confirming a non-stationary series.</p></li>
<li><p>PACF has a strong spike at lag 1, suggesting an AR(1) process.</p></li>
<li><p>First-order differencing (d=1) is needed to achieve stationarity.</p></li>
<li><p>Potential ARIMA model: ARIMA(1,1,0) or ARIMA(1,1,1).</p></li>
<li><p>ETS or Prophet could be alternatives since they handle trends naturally.</p></li>
</ul>
<p><strong>Next Steps</strong></p>
<ul>
<li><p>Apply differencing (d=1) and re-check ACF/PACF.</p></li>
<li><p>Re-run the ADF test to confirm stationarity.</p></li>
<li><p>Proceed with ARIMA, ETS, or Prophet for forecasting.</p></li>
</ul>
<p>Oceania’s trade balance (T5) is non-stationary with a trend, requiring first-order differencing (d=1). Unlike other regions, its ACF decays slightly faster, and PACF suggests possible higher-order AR effects. ARIMA(1,1,0) or ARIMA(2,1,0) could be suitable, while ETS or Prophet remain strong alternatives for capturing trends and fluctuations.</p>
</section>
</section>
<section id="step-3-split-data-into-training-testing" class="level2" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="step-3-split-data-into-training-testing"><span class="header-section-number">6.6</span> Step #3: <strong>Split Data into Training &amp; Testing</strong></h2>
<ul>
<li><p>Training set: Used to train the forecasting models (80% of data).</p></li>
<li><p>Testing set: Used to evaluate model performance (20% of data)</p></li>
<li><p>Ensures the model is tested on unseen data before forecasting.</p></li>
</ul>
</section>
<section id="setp-4-fit-multiple-models-ets-arima-and-prophet" class="level2" data-number="6.7">
<h2 data-number="6.7" class="anchored" data-anchor-id="setp-4-fit-multiple-models-ets-arima-and-prophet"><span class="header-section-number">6.7</span> <strong>Setp #4: Fit Multiple Models (ETS, ARIMA, and Prophet)</strong></h2>
<ul>
<li><p>ETS (Exponential Smoothing): Best for seasonal &amp; trending data.</p></li>
<li><p>ARIMA (AutoRegressive Integrated Moving Average): Works well for stationary data (after differencing).</p></li>
<li><p>Prophet: Ideal for handling trends, seasonality, and missing data.</p></li>
</ul>
</section>
<section id="step-5-calibrate-models-evaluate-accuracy" class="level2" data-number="6.8">
<h2 data-number="6.8" class="anchored" data-anchor-id="step-5-calibrate-models-evaluate-accuracy"><span class="header-section-number">6.8</span> <strong>Step #5: Calibrate Models &amp; Evaluate Accuracy</strong></h2>
<ul>
<li><p>Calibrate models using <code>modeltime_calibrate()</code>.</p></li>
<li><p>Assess accuracy using <code>modeltime_accuracy()</code>, checking:</p>
<ul>
<li><p>MAE (Mean Absolute Error) → Lower is better.</p></li>
<li><p>RMSE (Root Mean Squared Error) → Lower is better.</p></li>
<li><p>MAPE (Mean Absolute Percentage Error) → Lower is better.</p></li>
<li><p>R² (R-Squared) → Higher is better.</p></li>
</ul></li>
</ul>
</section>
<section id="step-6-select-the-best-model-and-forecast-12-months-ahead" class="level2" data-number="6.9">
<h2 data-number="6.9" class="anchored" data-anchor-id="step-6-select-the-best-model-and-forecast-12-months-ahead"><span class="header-section-number">6.9</span> <strong>Step #6: Select the Best Model and Forecast 12 Months Ahead</strong></h2>
<ul>
<li><p>Pick the model with best accuracy scores.</p></li>
<li><p>Use <code>modeltime_forecast()</code> to generate future predictions for 12 months.</p></li>
</ul>
</section>
<section id="step-7-visualize-and-save-forecast-results" class="level2" data-number="6.10">
<h2 data-number="6.10" class="anchored" data-anchor-id="step-7-visualize-and-save-forecast-results"><span class="header-section-number">6.10</span> <strong>Step #7: Visualize and Save Forecast Results</strong></h2>
<ul>
<li><p>Plot forecasts using <code>ggplot2</code> to compare model predictions.</p></li>
<li><p>Save the forecast data (<code>write_xlsx()</code>) for project submission.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to process each region</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>process_region <span class="ot">&lt;-</span> <span class="cf">function</span>(region) {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Processing region:"</span>, region, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Prepare data</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  df_region <span class="ot">&lt;-</span> df_T5 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Date, <span class="fu">all_of</span>(region)) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Value =</span> <span class="fu">all_of</span>(region))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split into training (80%) and testing (20%)</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  splits <span class="ot">&lt;-</span> <span class="fu">initial_time_split</span>(df_region, <span class="at">prop =</span> <span class="fl">0.8</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  training_data <span class="ot">&lt;-</span> <span class="fu">training</span>(splits)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  testing_data <span class="ot">&lt;-</span> <span class="fu">testing</span>(splits)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit ETS Model</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  model_ets <span class="ot">&lt;-</span> <span class="fu">exp_smoothing</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">"ets"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(Value <span class="sc">~</span> Date, <span class="at">data =</span> training_data)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit Auto ARIMA Model</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  model_arima <span class="ot">&lt;-</span> <span class="fu">arima_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">"auto_arima"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(Value <span class="sc">~</span> Date, <span class="at">data =</span> training_data)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit Prophet Model</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  model_prophet <span class="ot">&lt;-</span> <span class="fu">prophet_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">"prophet"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(Value <span class="sc">~</span> Date, <span class="at">data =</span> training_data)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create Model Table</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  models_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    model_ets,</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    model_arima,</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    model_prophet</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calibrate Models</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  calibration_tbl <span class="ot">&lt;-</span> models_tbl <span class="sc">%&gt;%</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_calibrate</span>(<span class="at">new_data =</span> testing_data)</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Evaluate Model Accuracy</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  accuracy_results <span class="ot">&lt;-</span> calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_accuracy</span>()</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(accuracy_results)</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Forecast for the next 12 months</span></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>  forecast_future <span class="ot">&lt;-</span> calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_refit</span>(<span class="at">data =</span> df_region) <span class="sc">%&gt;%</span></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">h =</span> <span class="st">"12 months"</span>,</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">actual_data =</span> df_region,</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_data =</span> <span class="cn">TRUE</span></span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Plot Forecast</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a>  forecast_plot <span class="ot">&lt;-</span> forecast_future <span class="sc">%&gt;%</span></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value, <span class="at">color =</span> .model_desc)) <span class="sc">+</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"12-Month Forecast for"</span>, region),</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Trade Balance"</span>, <span class="at">color =</span> <span class="st">"Model"</span>) <span class="sc">+</span></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(forecast_plot)</span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Process each region</span></span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (region <span class="cf">in</span> desired_regions) {</span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">process_region</span>(region)</span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: America </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  .model_id .model_desc  .type   mae  mape  mase smape  rmse      rsq
      &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1         1 ETS(A,N,N)   Test  1613.  661.  2.16  166. 1861. NA      
2         2 ARIMA(1,1,1) Test  1379.  524.  1.85  161. 1657.  0.00787
3         3 PROPHET      Test   800.  257.  1.07  129. 1018.  0.158  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Asia </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  .model_id .model_desc  .type   mae  mape  mase smape  rmse       rsq
      &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
1         1 ETS(A,N,N)   Test  2140.  33.1  1.55  39.2 2517. NA       
2         2 ARIMA(0,1,1) Test  2142.  33.2  1.55  39.3 2519. NA       
3         3 PROPHET      Test  1582.  28.6  1.15  27.9 1918.  0.000964</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Africa </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  .model_id .model_desc  .type   mae  mape  mase smape  rmse      rsq
      &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1         1 ETS(A,N,N)   Test   374.  125.  1.92  139.  444. NA      
2         2 ARIMA(1,1,1) Test   355.  134.  1.82  124.  426.  0.00743
3         3 PROPHET      Test   522.  145.  2.67  187.  609.  0.237  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-11-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Europe </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  .model_id .model_desc             .type   mae  mape  mase smape  rmse     rsq
      &lt;int&gt; &lt;chr&gt;                   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1         1 ETS(A,N,A)              Test  1727.  69.8  2.27 112.  1919. 0.0320 
2         2 ARIMA(0,1,2)(0,0,1)[12] Test  1787.  76.1  2.35 118.  1964. 0.00916
3         3 PROPHET                 Test   767.  54.9  1.01  37.0  934. 0.00202</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-11-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Oceania </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  .model_id .model_desc  .type   mae  mape  mase smape  rmse    rsq
      &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1         1 ETS(M,A,N)   Test   476.  30.6  1.33  29.0  602. 0.237 
2         2 ARIMA(0,1,2) Test   737.  43.1  2.05  48.0  855. 0.0277
3         3 PROPHET      Test   824.  48.3  2.30  55.6  947. 0.158 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-11-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This R code defines a function <code>process_region</code> that forecasts trade balance for individual regions using three distinct time-series models: Exponential Smoothing (ETS), Auto ARIMA, and Prophet. For each specified region, it splits data into training (80%) and testing (20%) subsets, fits the models, evaluates their accuracy, and generates a calibrated 12-month forecast. Results, including accuracy metrics and a comparative visualization of forecasts, are printed for each region, facilitating informed decision-making through robust, model-driven insights into future trade balance trends.</p>
<section id="model-evaluation-summary" class="level3" data-number="6.10.1">
<h3 data-number="6.10.1" class="anchored" data-anchor-id="model-evaluation-summary"><span class="header-section-number">6.10.1</span> Model Evaluation Summary</h3>
<p>Based on the evaluation metrics, Prophet performed best for America, Asia, and Europe, providing the lowest MAE and RMSE. ARIMA(1,1,1) was the most accurate for Africa, while ETS(M,A,N) performed best for Oceania. This suggests that trend-heavy regions benefit from Prophet’s ability to handle non-stationarity, whereas ARIMA and ETS are more suitable where local patterns dominate. Future work can explore tuning ARIMA further or hybrid modeling approaches.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a summary table of model evaluation metrics for all regions</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Region =</span> <span class="fu">c</span>(<span class="st">"America"</span>, <span class="st">"Asia"</span>, <span class="st">"Africa"</span>, <span class="st">"Europe"</span>, <span class="st">"Oceania"</span>),</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Best_Model =</span> <span class="fu">c</span>(<span class="st">"Prophet"</span>, <span class="st">"Prophet"</span>, <span class="st">"ARIMA(1,1,1)"</span>, <span class="st">"Prophet"</span>, <span class="st">"ETS(M,A,N)"</span>),</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">MAE =</span> <span class="fu">c</span>(<span class="dv">800</span>, <span class="dv">1582</span>, <span class="dv">355</span>, <span class="dv">767</span>, <span class="dv">476</span>),</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">MAPE =</span> <span class="fu">c</span>(<span class="dv">257</span>, <span class="fl">28.6</span>, <span class="dv">134</span>, <span class="fl">54.9</span>, <span class="fl">30.6</span>),</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">MASE =</span> <span class="fu">c</span>(<span class="fl">1.07</span>, <span class="fl">1.15</span>, <span class="fl">1.82</span>, <span class="fl">1.01</span>, <span class="fl">1.33</span>),</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">SMAPE =</span> <span class="fu">c</span>(<span class="dv">129</span>, <span class="fl">27.9</span>, <span class="dv">124</span>, <span class="fl">37.0</span>, <span class="fl">29.0</span>),</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">RMSE =</span> <span class="fu">c</span>(<span class="dv">1018</span>, <span class="dv">1918</span>, <span class="dv">426</span>, <span class="dv">934</span>, <span class="dv">602</span>),</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">R2 =</span> <span class="fu">c</span>(<span class="fl">0.158</span>, <span class="fl">0.000964</span>, <span class="fl">0.00743</span>, <span class="fl">0.00202</span>, <span class="fl">0.237</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the summary table</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>summary_df <span class="sc">%&gt;%</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"pipe"</span>, <span class="at">caption =</span> <span class="st">"Model Evaluation Summary for Trade Balance Forecasting"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<caption>Model Evaluation Summary for Trade Balance Forecasting</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Region</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Best_Model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAPE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MASE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">SMAPE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">R2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">America</td>
<td style="text-align: left;">Prophet</td>
<td style="text-align: right;">800</td>
<td style="text-align: right;">257.0</td>
<td style="text-align: right;">1.07</td>
<td style="text-align: right;">129.0</td>
<td style="text-align: right;">1018</td>
<td style="text-align: right;">0.158000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Asia</td>
<td style="text-align: left;">Prophet</td>
<td style="text-align: right;">1582</td>
<td style="text-align: right;">28.6</td>
<td style="text-align: right;">1.15</td>
<td style="text-align: right;">27.9</td>
<td style="text-align: right;">1918</td>
<td style="text-align: right;">0.000964</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Africa</td>
<td style="text-align: left;">ARIMA(1,1,1)</td>
<td style="text-align: right;">355</td>
<td style="text-align: right;">134.0</td>
<td style="text-align: right;">1.82</td>
<td style="text-align: right;">124.0</td>
<td style="text-align: right;">426</td>
<td style="text-align: right;">0.007430</td>
</tr>
<tr class="even">
<td style="text-align: left;">Europe</td>
<td style="text-align: left;">Prophet</td>
<td style="text-align: right;">767</td>
<td style="text-align: right;">54.9</td>
<td style="text-align: right;">1.01</td>
<td style="text-align: right;">37.0</td>
<td style="text-align: right;">934</td>
<td style="text-align: right;">0.002020</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oceania</td>
<td style="text-align: left;">ETS(M,A,N)</td>
<td style="text-align: right;">476</td>
<td style="text-align: right;">30.6</td>
<td style="text-align: right;">1.33</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">602</td>
<td style="text-align: right;">0.237000</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="trade-balance-best-model-for-each-region---12-month-forecast" class="level2" data-number="6.11">
<h2 data-number="6.11" class="anchored" data-anchor-id="trade-balance-best-model-for-each-region---12-month-forecast"><span class="header-section-number">6.11</span> Trade Balance: Best Model for Each Region - 12-Month Forecast</h2>
<section id="t5-forecasting-i" class="level3" data-number="6.11.1">
<h3 data-number="6.11.1" class="anchored" data-anchor-id="t5-forecasting-i"><span class="header-section-number">6.11.1</span> T5 Forecasting I</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Best Model for Each Region - 12-Month Forecast</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Define best models for each region</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>best_models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"America"</span> <span class="ot">=</span> <span class="fu">prophet_reg</span>() <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">"prophet"</span>),</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Asia"</span> <span class="ot">=</span> <span class="fu">prophet_reg</span>() <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">"prophet"</span>),</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Africa"</span> <span class="ot">=</span> <span class="fu">arima_reg</span>() <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">"auto_arima"</span>),</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Europe"</span> <span class="ot">=</span> <span class="fu">prophet_reg</span>() <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">"prophet"</span>),</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Oceania"</span> <span class="ot">=</span> <span class="fu">exp_smoothing</span>() <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">"ets"</span>)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the final forecast results list</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>forecast_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Process each region</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (region <span class="cf">in</span> <span class="fu">names</span>(best_models)) {</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Processing region:"</span>, region, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Prepare data</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  df_region <span class="ot">&lt;-</span> df_T5 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Date, <span class="fu">all_of</span>(region)) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Value =</span> <span class="fu">all_of</span>(region))</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split into training (80%) and testing (20%)</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  splits <span class="ot">&lt;-</span> <span class="fu">initial_time_split</span>(df_region, <span class="at">prop =</span> <span class="fl">0.8</span>)</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  training_data <span class="ot">&lt;-</span> <span class="fu">training</span>(splits)</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  testing_data <span class="ot">&lt;-</span> <span class="fu">testing</span>(splits)</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit the best model</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  model_fit <span class="ot">&lt;-</span> best_models[[region]] <span class="sc">%&gt;%</span> <span class="fu">fit</span>(Value <span class="sc">~</span> Date, <span class="at">data =</span> training_data)</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Forecast for the next 12 months</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  forecast_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(model_fit) <span class="sc">%&gt;%</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_refit</span>(<span class="at">data =</span> df_region) <span class="sc">%&gt;%</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">h =</span> <span class="st">"12 months"</span>,</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">actual_data =</span> df_region,</span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_data =</span> <span class="cn">TRUE</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store forecast results</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>  forecast_results[[region]] <span class="ot">&lt;-</span> forecast_tbl</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Improved Forecast Plot</span></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>  forecast_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> df_region, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Value), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"solid"</span>) <span class="sc">+</span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> forecast_tbl, <span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value, <span class="at">color =</span> .model_desc), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Best Model Forecast for"</span>, region, <span class="st">"(12 Months)"</span>),</span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Trade Balance"</span>, <span class="at">color =</span> <span class="st">"Model"</span>) <span class="sc">+</span></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>))</span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(forecast_plot)</span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: America </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Asia </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Africa </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-13-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Europe </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-13-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Processing region: Oceania </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-13-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save forecast results into an Excel file</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(forecast_results, <span class="st">"data/forecast_T5_best_models.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="t5-forecasting-ii-showing-month-on-month-change" class="level3" data-number="6.11.2">
<h3 data-number="6.11.2" class="anchored" data-anchor-id="t5-forecasting-ii-showing-month-on-month-change"><span class="header-section-number">6.11.2</span> T5 Forecasting II (Showing month-on-month change)</h3>
<p>Month-on-Month Change (Absolute):</p>
<ul>
<li><p>Displays the absolute month-on-month change (<code>.value - lag(.value)</code>) directly on the plot as numeric annotations.</p></li>
<li><p>This shows the magnitude of trade balance changes from one month to the next explicitly, but importantly, not as percentages, rather as absolute differences (e.g., +569.4 or -326.7 million).</p></li>
<li><p>Users can quickly interpret absolute trade balance fluctuations month-by-month.</p></li>
<li><p>The clear visual distinction between historical and forecasted periods simplifies understanding how future forecasts relate directly to past performance.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show code here</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the forecasted data from each worksheet as a named list</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="st">"data/forecast_T5_best_models.xlsx"</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> <span class="fu">excel_sheets</span>(file_path)</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>forecast_results <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="fu">set_names</span>(sheet_names), <span class="sc">~</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> .x))</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure .index column is in Date format</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>forecast_results <span class="ot">&lt;-</span> <span class="fu">map</span>(forecast_results, <span class="sc">~</span> <span class="fu">mutate</span>(.x, <span class="at">.index =</span> <span class="fu">as.Date</span>(.index)))</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate zoomed-in line chart for each region (2024-2025) with highlighted forecast area</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (region <span class="cf">in</span> <span class="fu">names</span>(forecast_results)) {</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>  forecast_tbl <span class="ot">&lt;-</span> forecast_results[[region]]</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract last actual data point and first forecasted data point</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>  last_actual <span class="ot">&lt;-</span> forecast_tbl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.model_desc <span class="sc">==</span> <span class="st">"ACTUAL"</span>, .index <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>))</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>  first_forecast <span class="ot">&lt;-</span> forecast_tbl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.model_desc <span class="sc">!=</span> <span class="st">"ACTUAL"</span>, .index <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">"2025-02-01"</span>))</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a connection dataframe</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>  connection_df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(last_actual, first_forecast)</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>  forecast_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> forecast_tbl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.index <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>), .model_desc <span class="sc">==</span> <span class="st">"ACTUAL"</span>),</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value), <span class="at">color =</span> <span class="st">"green"</span>, <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">linetype =</span> <span class="st">"solid"</span>) <span class="sc">+</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> forecast_tbl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.index <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>), .model_desc <span class="sc">!=</span> <span class="st">"ACTUAL"</span>),</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value, <span class="at">color =</span> .model_desc), <span class="at">size =</span> <span class="fl">1.8</span>) <span class="sc">+</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> connection_df, <span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value), <span class="at">color =</span> <span class="st">"green"</span>, <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>), <span class="at">xmax =</span> <span class="fu">as.Date</span>(<span class="st">"2025-12-31"</span>), </span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Best Model Forecast for"</span>, region, <span class="st">"(2024-2025)"</span>),</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Trade Balance (Million)"</span>, <span class="at">color =</span> <span class="st">"Model"</span>) <span class="sc">+</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>), </span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">14</span>), </span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>), </span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) <span class="sc">+</span></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"1 month"</span>, <span class="at">date_labels =</span> <span class="st">"%b %Y"</span>) <span class="sc">+</span></span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">data =</span> forecast_tbl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.index <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">yoy_change =</span> .value <span class="sc">-</span> <span class="fu">lag</span>(.value)),</span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value, <span class="at">label =</span> <span class="fu">round</span>(yoy_change, <span class="dv">2</span>)),</span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>              <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(forecast_plot)</span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="2304"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid figure-img" width="2304"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-14-3.png" class="img-fluid figure-img" width="2304"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-14-4.png" class="img-fluid figure-img" width="2304"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-14-5.png" class="img-fluid figure-img" width="2304"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="conclusion" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Conclusion</h1>
<p>This assignment developed a comprehensive interactive dashboard using Shiny for analyzing merchandise trade data. It effectively addresses earlier identified visualization limitations by clearly distinguishing imports, domestic exports, re-exports, total exports, and trade balance. Users can flexibly explore data trends, seasonal variations, and specific regional insights through interactive selection options. The resulting visualizations and data tables enhance clarity, enabling quick and intuitive interpretation of trade dynamics.</p>
</section>
<section id="future-work" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Future Work</h1>
<p>To extend this assignment further, future enhancements could include:</p>
<ul>
<li><p>Adding more detailed economic indicators or contextual data for deeper insights.</p></li>
<li><p>Implementing advanced forecasting methods or ensemble modeling to improve forecast accuracy.</p></li>
<li><p>Integrating scenario analysis features for exploring hypothetical trade scenarios interactively.</p></li>
<li><p>Elevating the dashboard’s functionality and user experience to match advanced capabilities found in commercial software applications like Tableau, Qlik, or SAS Viya—delivering comparable analytical power, interactivity, and usability at a fraction of the cost.</p></li>
</ul>
<p><img src="images/clipboard-363472380.png" class="img-fluid" width="596"></p>
<p>Critique 3 closely mirrors the first two critiques in terms of its pros, cons, and overall recommendations. The main distinguishing factor is the additional time required to develop more advanced dashboard functionalities. These enhancements aim to support more complex interactions and greater flexibility within the existing Shiny applications.</p>
<p>Key features expected in this enhancement include:</p>
<ul>
<li><p>Selection of a range of countries</p></li>
<li><p>Filtering by type of services and commodities</p></li>
<li><p>Analysis by quarters</p></li>
<li><p>Additional interactive elements for deeper analysis</p></li>
</ul>
<p>The increased complexity of these features means that the development process will require more extensive effort and time, particularly in refining the user interface (UI) and ensuring seamless data integration.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>