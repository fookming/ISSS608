{
  "hash": "5cd8794c80c2f4f10b9e718d63684e73",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take Home Exercise 01 (Work in Progress...)\"\nauthor: \"Ee Fook Ming\"\ndate: \"February 8, 2025\"\ndate-modified: last-modified\nexecute:\n  echo: true\n  eval: true\n  warning: false\n  freeze: true\nformat: \n  html:\n    number-sections: true\n    number-depth: 3\n#    number-offset: [12, 0]  # Offset heading levels by starting at 13\noutput: \n  html_document: \n    toc: true\n    tabset: true\n---\n\n\n\n[Overview and Background: Ship Performance in the Gulf of Guinea (Work in Progress...)]{style=\"font-size: 44px; font-weight: bold;\"}\n\n# Introduction\n\nThe maritime industry is a cornerstone of global trade, ensuring the smooth transportation of goods across continents. The efficient performance of ships is crucial to optimizing fuel consumption, minimizing operational costs, and maximizing revenue. This assignment explores ship performance trends using the Ship Performance Clustering Dataset, focusing on ships operating in the Gulf of Guinea—a vital maritime region known for its economic and strategic importance.\n\nBy analyzing ship performance metrics such as speed, efficiency, operational cost, and revenue, we aim to uncover insights that can enhance operational decision-making. This study employs data visualization techniques to identify key patterns, trends, and potential optimizations in ship performance.\n\n![](images/clipboard-4268411684.png)\n\n# Background and Content\n\n## Maritime Significance of the Gulf of Guinea\n\nThe Gulf of Guinea serves as a major maritime trade route, connecting West Africa to global markets. The region hosts various types of commercial ships, including tankers, container ships, and bulk carriers, each operating under different economic and environmental conditions. Given the challenges posed by fuel costs, maintenance, and weather conditions, shipowners and operators constantly seek ways to improve efficiency while reducing operational expenses.\n\n## Data Overview\n\nThe dataset used in this study is a synthetic but realistic representation of maritime operations. The key attributes include:\n\n-   Speed Over Ground (knots)\n-   Distance Traveled (nautical miles)\n-   Engine Power (kW)\n-   Operational Cost (USD)\n-   Revenue per Voyage (USD)\n-   Efficiency (nautical miles per kilowatt-hour)\n-   Ship Type, Route Type, Engine Type, and Maintenance Status\n\nThis dataset provides a rich foundation for exploratory data analysis (EDA), clustering analysis, and performance optimization.\n\n### Understanding the Dataset\n\nThis dataset consists of 2736 rows and 24 columns, categorized into numerical and categorical features. Key attributes include: Numerical Features:\n\n-   Speed_Over_Ground_knots – Ship speed over water (knots)\n-   Engine_Power_kW – Engine power output (kilowatts)\n-   Distance_Traveled_nm – Distance traveled per voyage (nautical miles)\n-   Operational_Cost_USD – Cost per voyage (USD)\n-   Revenue_per_Voyage_USD – Revenue per voyage (USD)\n-   Efficiency_nm_per_kWh – Energy efficiency (nautical miles per kilowatt-hour)\n\nCategorical Features:\n\n-   Ship_Type (e.g., Tanker, Container Ship, Bulk Carrier)\n-   Route_Type (e.g., Short-haul, Long-haul, Transoceanic)\n-   Engine_Type (e.g., Diesel, Heavy Fuel Oil)\n-   Maintenance_Status (e.g., Fair, Critical, Good)\n-   Weather_Condition (e.g., Calm, Moderate, Rough)\n\n# Load & Explore the Dataset\n\n-   Loading the required libraries\n-   Loading the dataset into R.\n-   Checking the structure (columns, data types).\n-   Identifying missing values and duplicates.\n\n## Loading Libraries\n\n## Essential R Packages for Data Science and Visualization\n\nThis document provides an overview of essential R packages commonly used for data science, data visualization, and dynamic reporting.\n\n### Core Data Science Libraries\n\n-   [**tidyverse**](https://www.tidyverse.org/): A collection of integrated packages designed for modern data science workflows, including data import, tidying, transformation, visualization, and modeling.\n-   [**haven**](https://haven.tidyverse.org/): Enables R to read and write data stored in SAS, SPSS, and Stata formats, ensuring seamless interoperability with statistical software.\n-   [**knitr**](https://yihui.org/knitr/): Facilitates dynamic report generation, allowing users to embed R code in markdown and generate high-quality documents.\n\n### Visualization Enhancements for ggplot2\n\n-   [**patchwork**](https://patchwork.data-imaginist.com/): Simplifies the arrangement of multiple ggplot2-based visualizations into composite figures for improved storytelling.\n-   [**ggthemes**](https://jrnold.github.io/ggthemes/): Provides additional themes, scales, and geoms to enhance the appearance of ggplot2 visualizations.\n-   [**scales**](https://scales.r-lib.org/): Supports improved data labeling, annotation, and scale transformations for ggplot2.\n-   [**ggridges**](https://wilkelab.org/ggridges/): Enables the creation of ridgeline plots, useful for visualizing distribution changes over time or across categories.\n-   [**ggpubr**](https://rpkgs.datanovia.com/ggpubr/): Provides functions for creating publication-ready plots with minimal effort.\n-   [**gganimate**](https://gganimate.com/): Extends ggplot2 to include animation, making it possible to visualize dynamic data over time.\n-   [**ggdist**](https://mjskay.github.io/ggdist/): Offers enhanced tools for visualizing statistical distributions and uncertainties in data.\n-   [**ggtext**](https://wilkelab.org/ggtext/): Enhances text rendering and formatting in ggplot2 visualizations.\n-   [**ggalt**](https://github.com/hrbrmstr/ggalt): A collection of additional geoms, coordinates, and statistics that extend ggplot2 capabilities.\n-   [**ggextra**](https://cran.r-project.org/package=ggExtra): Adds marginal plots and supplementary visual elements to ggplot2 graphics.\n-   [**cowplot**](https://wilkelab.org/cowplot/): Provides tools for creating publication-quality figures, including alignment functions and themes for consistent presentation.\n-   [**ggnewscale**](https://github.com/eliocamp/ggnewscale): Allows the definition of multiple independent scales within a single ggplot2 visualization, useful for complex multivariate plots.\n\nLoading the libraries using pacman package.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary libraries\npacman::p_load(tidyverse, \n               ggplot2, \n               skimr,  # For data summary \n               janitor, # For cleaning column names\n               knitr)\n```\n:::\n\n\n\n## Load & Inspect Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nship_data <- read.csv(\"data/Ship_Performance_Dataset.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load dataset\nship_data <- read.csv(\"data/Ship_Performance_Dataset.csv\")\n\n# Clean column names\nship_data <- clean_names(ship_data)\n\n# Check structure\nglimpse(ship_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,736\nColumns: 18\n$ date                    <chr> \"2023-06-04\", \"2023-06-11\", \"2023-06-18\", \"202…\n$ ship_type               <chr> \"Container Ship\", \"Fish Carrier\", \"Container S…\n$ route_type              <chr> \"None\", \"Short-haul\", \"Long-haul\", \"Transocean…\n$ engine_type             <chr> \"Heavy Fuel Oil (HFO)\", \"Steam Turbine\", \"Dies…\n$ maintenance_status      <chr> \"Critical\", \"Good\", \"Fair\", \"Fair\", \"Fair\", \"F…\n$ speed_over_ground_knots <dbl> 12.59756, 10.38758, 20.74975, 21.05510, 13.742…\n$ engine_power_k_w        <dbl> 2062.9840, 1796.0574, 1648.5567, 915.2618, 108…\n$ distance_traveled_nm    <dbl> 1030.9436, 1060.4864, 658.8741, 1126.8225, 144…\n$ draft_meters            <dbl> 14.132284, 14.653083, 7.199261, 11.789063, 9.7…\n$ weather_condition       <chr> \"Moderate\", \"Rough\", \"Moderate\", \"Moderate\", \"…\n$ cargo_weight_tons       <dbl> 1959.0179, 162.3947, 178.0409, 1737.3853, 260.…\n$ operational_cost_usd    <dbl> 483832.35, 483388.00, 448543.40, 261349.61, 28…\n$ revenue_per_voyage_usd  <dbl> 292183.27, 883765.79, 394018.75, 87551.38, 676…\n$ turnaround_time_hours   <dbl> 25.86708, 63.24820, 49.41815, 22.40911, 64.158…\n$ efficiency_nm_per_k_wh  <dbl> 1.4551789, 0.2903614, 0.4995945, 0.7029057, 1.…\n$ seasonal_impact_score   <dbl> 1.4156533, 0.8856478, 1.4058132, 1.3707043, 0.…\n$ weekly_voyage_count     <int> 1, 6, 9, 1, 8, 7, 3, 6, 8, 2, 9, 4, 3, 7, 7, 3…\n$ average_load_percentage <dbl> 93.76925, 93.89537, 96.21824, 66.19370, 80.008…\n```\n\n\n:::\n\n```{.r .cell-code}\n# Summary statistics\nskim(ship_data)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |          |\n|:------------------------|:---------|\n|Name                     |ship_data |\n|Number of rows           |2736      |\n|Number of columns        |18        |\n|_______________________  |          |\n|Column type frequency:   |          |\n|character                |6         |\n|numeric                  |12        |\n|________________________ |          |\n|Group variables          |None      |\n\n\n**Variable type: character**\n\n|skim_variable      | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:------------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|date               |         0|             1|  10|  10|     0|       57|          0|\n|ship_type          |         0|             1|   4|  14|     0|        5|          0|\n|route_type         |         0|             1|   4|  12|     0|        5|          0|\n|engine_type        |         0|             1|   4|  20|     0|        4|          0|\n|maintenance_status |         0|             1|   4|   8|     0|        4|          0|\n|weather_condition  |         0|             1|   4|   8|     0|        4|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable           | n_missing| complete_rate|      mean|        sd|       p0|       p25|       p50|       p75|      p100|hist  |\n|:-----------------------|---------:|-------------:|---------:|---------:|--------:|---------:|---------:|---------:|---------:|:-----|\n|speed_over_ground_knots |         0|             1|     17.60|      4.31|    10.01|     13.93|     17.71|     21.28|     25.00|▇▇▇▇▇ |\n|engine_power_k_w        |         0|             1|   1757.61|    717.00|   501.03|   1148.10|   1757.49|   2382.59|   2998.73|▇▇▇▇▇ |\n|distance_traveled_nm    |         0|             1|   1036.41|    568.63|    50.43|    548.51|   1037.82|   1540.93|   1998.34|▇▇▇▇▇ |\n|draft_meters            |         0|             1|      9.93|      2.88|     5.00|      7.44|      9.92|     12.41|     14.99|▇▇▇▇▇ |\n|cargo_weight_tons       |         0|             1|   1032.57|    558.70|    50.23|    553.98|   1043.21|   1527.72|   1999.13|▇▇▇▇▇ |\n|operational_cost_usd    |         0|             1| 255143.34| 140890.48| 10092.31| 131293.38| 257157.65| 381796.93| 499734.87|▇▇▇▇▇ |\n|revenue_per_voyage_usd  |         0|             1| 521362.06| 271211.63| 50351.81| 290346.39| 520176.93| 750072.79| 999916.70|▇▇▇▇▇ |\n|turnaround_time_hours   |         0|             1|     41.75|     17.63|    12.02|     26.17|     41.59|     57.36|     71.97|▇▇▇▇▇ |\n|efficiency_nm_per_k_wh  |         0|             1|      0.80|      0.40|     0.10|      0.46|      0.79|      1.15|      1.50|▇▇▇▇▇ |\n|seasonal_impact_score   |         0|             1|      1.00|      0.29|     0.50|      0.76|      1.01|      1.25|      1.50|▇▇▇▇▇ |\n|weekly_voyage_count     |         0|             1|      4.91|      2.60|     1.00|      3.00|      5.00|      7.00|      9.00|▇▇▃▇▇ |\n|average_load_percentage |         0|             1|     75.22|     14.51|    50.01|     62.70|     75.50|     87.72|    100.00|▇▇▇▇▇ |\n\n\n:::\n\n```{.r .cell-code}\n# Check for missing values\ncolSums(is.na(ship_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                   date               ship_type              route_type \n                      0                       0                       0 \n            engine_type      maintenance_status speed_over_ground_knots \n                      0                       0                       0 \n       engine_power_k_w    distance_traveled_nm            draft_meters \n                      0                       0                       0 \n      weather_condition       cargo_weight_tons    operational_cost_usd \n                      0                       0                       0 \n revenue_per_voyage_usd   turnaround_time_hours  efficiency_nm_per_k_wh \n                      0                       0                       0 \n  seasonal_impact_score     weekly_voyage_count average_load_percentage \n                      0                       0                       0 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Check for duplicates\nsum(duplicated(ship_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### Examine Unique Values in Categorical Variables\n\n- Automatically selects categorical variables (columns that are either character or factor types).\n- Prints out the column name in a formatted header.\n- Lists all unique values within each categorical column.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Function to print unique values of categorical variables\n\nprint_categorical_values <- function(data) {\n  cat(\"### Categorical Variables and Their Unique Values\\n\\n\")\n  \n  \n  # Identify columns with date-like values (YYYY-MM-DD format) and date class\n  date_columns <- names(data)[sapply(data, function(col) {\n    is_date <- inherits(col, \"Date\") || inherits(col, \"POSIXt\")  # Check if it's a date class\n    is_formatted_date <- all(grepl(\"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\", na.omit(as.character(col))))  # Check string format\n    return(is_date | is_formatted_date)\n  })]\n\n  \n  # Select categorical columns, excluding detected date columns\n  categorical_vars <- data %>%\n    select(where(~ is.character(.) | is.factor(.))) %>%\n    select(-any_of(date_columns))  # Remove detected date columns\n  \n  if (ncol(categorical_vars) == 0) {\n    cat(\"No categorical variables found in the dataset.\\n\")\n    return()\n  }\n  \n  for (col in colnames(categorical_vars)) {\n    unique_values <- unique(categorical_vars[[col]])\n    \n    # Remove \"None\" if it appears as a category\n    unique_values <- unique_values[unique_values != \"None\"]\n    \n    cat(\"####\", col, \"\\n\")\n    cat(\"Unique values:\", paste(unique_values, collapse = \", \"), \"\\n\\n\")\n  }\n}\n\n# Run the function\nprint_categorical_values(ship_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n### Categorical Variables and Their Unique Values\n\n#### ship_type \nUnique values: Container Ship, Fish Carrier, Bulk Carrier, Tanker \n\n#### route_type \nUnique values: Short-haul, Long-haul, Transoceanic, Coastal \n\n#### engine_type \nUnique values: Heavy Fuel Oil (HFO), Steam Turbine, Diesel \n\n#### maintenance_status \nUnique values: Critical, Good, Fair \n\n#### weather_condition \nUnique values: Moderate, Rough, Calm \n```\n\n\n:::\n:::\n\n\n\n### Count Rows with None\n\nThe code chunk counts the number of rows in your dataset based on how many \"None\" values they contain. It categorizes rows into:\n\n- 1x \"None\"\n- 2x \"None\"\n- 3x \"None\"\n- More than 3x \"None\"\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Function to count and display rows based on the number of \"None\" occurrences\ncount_none_rows <- function(data) {\n  # Count the number of \"None\" values in each row\n  none_counts <- rowSums(data == \"None\", na.rm = TRUE)\n  \n  # Count how many rows fall into each category\n  none_summary <- data.frame(\n    \"Category\" = c(\"1x None\", \"2x None\", \"3x None\", \">3x None\"),\n    \"Count\" = c(\n      sum(none_counts == 1),\n      sum(none_counts == 2),\n      sum(none_counts == 3),\n      sum(none_counts > 3)\n    )\n  )\n  \n  # Display summary\n  print(none_summary)\n  \n  # Display sample rows for each category\n  for (i in 1:4) {\n    cat(\"\\n### Sample Rows for\", none_summary$Category[i], \"\\n\")\n    sample_rows <- data[none_counts == i, ]\n    if (nrow(sample_rows) > 0) {\n      print(head(sample_rows, 5))  # Show only first 5 rows for clarity\n    } else {\n      cat(\"No rows found in this category.\\n\")\n    }\n  }\n  \n}\n\n# Run the function\ncount_none_rows(ship_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Category Count\n1  1x None   540\n2  2x None    68\n3  3x None     0\n4 >3x None     1\n\n### Sample Rows for 1x None \n         date      ship_type route_type          engine_type maintenance_status\n1  2023-06-04 Container Ship       None Heavy Fuel Oil (HFO)           Critical\n9  2023-07-30           None    Coastal Heavy Fuel Oil (HFO)               Good\n16 2023-09-17         Tanker  Long-haul                 None               Good\n21 2023-10-22 Container Ship       None               Diesel           Critical\n22 2023-10-29   Bulk Carrier Short-haul               Diesel               None\n   speed_over_ground_knots engine_power_k_w distance_traveled_nm draft_meters\n1                 12.59756        2062.9840            1030.9436    14.132284\n9                 17.30936        1179.0188             429.5643     6.002358\n16                15.08722         578.8929            1932.2131    12.998270\n21                23.80385        1120.6992            1169.4785    10.544799\n22                22.76036        2335.2629            1461.9175     7.980762\n   weather_condition cargo_weight_tons operational_cost_usd\n1           Moderate         1959.0179             483832.4\n9           Moderate         1953.4479             346071.5\n16             Rough          403.8543             424860.6\n21             Rough         1084.2556             377335.2\n22              Calm         1100.9686             441952.1\n   revenue_per_voyage_usd turnaround_time_hours efficiency_nm_per_k_wh\n1                292183.3              25.86708              1.4551789\n9                448682.9              14.45182              0.9774483\n16               633712.5              68.22836              0.6526741\n21               371301.2              57.59360              1.2623670\n22               666766.9              35.56856              1.0500736\n   seasonal_impact_score weekly_voyage_count average_load_percentage\n1              1.4156533                   1                93.76925\n9              0.7649141                   8                50.24706\n16             1.3086865                   3                74.51022\n21             1.4179010                   8                83.44323\n22             0.8750325                   6                92.18716\n\n### Sample Rows for 2x None \n          date    ship_type route_type   engine_type maintenance_status\n43  2024-03-24       Tanker       None Steam Turbine           Critical\n129 2023-09-10 Bulk Carrier    Coastal Steam Turbine               None\n135 2023-10-22         None  Long-haul        Diesel               None\n199 2023-12-10         None    Coastal          None               Fair\n219 2024-04-28 Bulk Carrier    Coastal          None               None\n    speed_over_ground_knots engine_power_k_w distance_traveled_nm draft_meters\n43                 19.08942        1095.2398            1801.1749     14.08673\n129                22.70870        1512.1199             771.3406      9.85436\n135                14.64564        2605.7648            1714.8680     11.43451\n199                12.25630         568.2896             495.4977     11.85982\n219                10.36508        1195.3456             247.0565     12.56096\n    weather_condition cargo_weight_tons operational_cost_usd\n43               None          858.1013             70720.33\n129              None         1580.1024            226899.21\n135          Moderate          682.6991            439967.19\n199              Calm          983.0555             28916.94\n219             Rough         1098.1778             22233.31\n    revenue_per_voyage_usd turnaround_time_hours efficiency_nm_per_k_wh\n43               382123.59              66.85377              0.7762076\n129              286758.26              39.56307              0.8514023\n135               51708.41              55.27975              0.5330556\n199               93070.13              16.16368              1.1969162\n219              956502.65              61.08365              0.7352781\n    seasonal_impact_score weekly_voyage_count average_load_percentage\n43              0.7934013                   3                85.87867\n129             0.8086902                   9                90.61944\n135             1.3134256                   3                58.93742\n199             0.7416365                   1                77.79094\n219             1.4287733                   7                64.02880\n\n### Sample Rows for 3x None \nNo rows found in this category.\n\n### Sample Rows for >3x None \n          date ship_type route_type engine_type maintenance_status\n197 2023-11-26      None       None        None               None\n    speed_over_ground_knots engine_power_k_w distance_traveled_nm draft_meters\n197                11.12406         1493.909             1279.969     11.59002\n    weather_condition cargo_weight_tons operational_cost_usd\n197             Rough          1515.524             317587.4\n    revenue_per_voyage_usd turnaround_time_hours efficiency_nm_per_k_wh\n197               583011.8              29.87684              0.1989973\n    seasonal_impact_score weekly_voyage_count average_load_percentage\n197             0.9338018                   9                82.86563\n```\n\n\n:::\n:::\n\n\n\n\n### Count Categorical Columns with None\n\n- Function to count \"None\" values in specified categorical columns\n  - ship_type\n  - route_type\n  - engine_type\n  - maintenance_status\n  - weather_condition\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_none_per_column <- function(data, columns) {\n  # Filter dataset to only selected columns\n  data_selected <- data %>% select(all_of(columns))\n  \n  # Count occurrences of \"None\" in each column\n  none_counts <- colSums(data_selected == \"None\", na.rm = TRUE)\n  \n  # Convert to data frame for display\n  df_summary <- data.frame(Column = names(none_counts), Count_None = none_counts)\n  \n  # Display results\n  print(df_summary)\n}\n\n\n# Define the categorical columns to analyze\ncategorical_columns <- c(\"ship_type\", \"route_type\", \"engine_type\", \"maintenance_status\", \"weather_condition\")\n\n# Run the function\ncount_none_per_column(ship_data, categorical_columns)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                               Column Count_None\nship_type                   ship_type        136\nroute_type                 route_type        136\nengine_type               engine_type        136\nmaintenance_status maintenance_status        136\nweather_condition   weather_condition        136\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Data Cleaning & Wrangling\n\n- Data Cleaning: Identifying and handling missing, duplicate, or inconsistent data.\n- Data Transformation: Converting data types (categorical columns into factors), normalizing values, and reformatting structures to improve usability.\n- Data Reduction: Filtering, aggregating, or summarizing data to focus on relevant information.\n- Data Validation: Ensuring data quality, accuracy, and consistency.\n- Data Integration: Combining data from multiple sources for a comprehensive dataset; where necessary and if required.\n- Feature Engineering: Create additional fields if needed.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert categorical variables to factors\ncategorical_vars <- c(\"ship_type\", \"route_type\", \"engine_type\", \"maintenance_status\", \"weather_condition\")\nship_data[categorical_vars] <- lapply(ship_data[categorical_vars], as.factor)\n\n\n# Identify Missing Values\nmissing_summary <- ship_data %>%\n  summarise(across(everything(), ~sum(is.na(.)), .names = \"missing_{.col}\"))\n\n# Display Missing Value Summary\nprint(\"Missing Values Summary:\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Missing Values Summary:\"\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(missing_summary)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  missing_date missing_ship_type missing_route_type missing_engine_type\n1            0                 0                  0                   0\n  missing_maintenance_status missing_speed_over_ground_knots\n1                          0                               0\n  missing_engine_power_k_w missing_distance_traveled_nm missing_draft_meters\n1                        0                            0                    0\n  missing_weather_condition missing_cargo_weight_tons\n1                         0                         0\n  missing_operational_cost_usd missing_revenue_per_voyage_usd\n1                            0                              0\n  missing_turnaround_time_hours missing_efficiency_nm_per_k_wh\n1                             0                              0\n  missing_seasonal_impact_score missing_weekly_voyage_count\n1                             0                           0\n  missing_average_load_percentage\n1                               0\n```\n\n\n:::\n\n```{.r .cell-code}\n# Handling missing values\nship_data <- ship_data %>%\n  mutate(across(where(is.numeric), ~replace_na(., median(., na.rm = TRUE)))) %>%\n  mutate(across(where(is.factor), ~replace_na(., as.factor(\"Missing\"))))  # Fix for categorical missing values\n\n# Verify changes\nglimpse(ship_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,736\nColumns: 18\n$ date                    <chr> \"2023-06-04\", \"2023-06-11\", \"2023-06-18\", \"202…\n$ ship_type               <fct> Container Ship, Fish Carrier, Container Ship, …\n$ route_type              <fct> None, Short-haul, Long-haul, Transoceanic, Tra…\n$ engine_type             <fct> Heavy Fuel Oil (HFO), Steam Turbine, Diesel, S…\n$ maintenance_status      <fct> Critical, Good, Fair, Fair, Fair, Fair, Critic…\n$ speed_over_ground_knots <dbl> 12.59756, 10.38758, 20.74975, 21.05510, 13.742…\n$ engine_power_k_w        <dbl> 2062.9840, 1796.0574, 1648.5567, 915.2618, 108…\n$ distance_traveled_nm    <dbl> 1030.9436, 1060.4864, 658.8741, 1126.8225, 144…\n$ draft_meters            <dbl> 14.132284, 14.653083, 7.199261, 11.789063, 9.7…\n$ weather_condition       <fct> Moderate, Rough, Moderate, Moderate, Moderate,…\n$ cargo_weight_tons       <dbl> 1959.0179, 162.3947, 178.0409, 1737.3853, 260.…\n$ operational_cost_usd    <dbl> 483832.35, 483388.00, 448543.40, 261349.61, 28…\n$ revenue_per_voyage_usd  <dbl> 292183.27, 883765.79, 394018.75, 87551.38, 676…\n$ turnaround_time_hours   <dbl> 25.86708, 63.24820, 49.41815, 22.40911, 64.158…\n$ efficiency_nm_per_k_wh  <dbl> 1.4551789, 0.2903614, 0.4995945, 0.7029057, 1.…\n$ seasonal_impact_score   <dbl> 1.4156533, 0.8856478, 1.4058132, 1.3707043, 0.…\n$ weekly_voyage_count     <int> 1, 6, 9, 1, 8, 7, 3, 6, 8, 2, 9, 4, 3, 7, 7, 3…\n$ average_load_percentage <dbl> 93.76925, 93.89537, 96.21824, 66.19370, 80.008…\n```\n\n\n:::\n:::\n\n\n\n## Exploratory Data Analysis (EDA)\n\nVisualizing Key Metrics\n\n### Ship Speed Distribution\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = speed_over_ground_knots)) +\n  geom_histogram(fill = \"blue\", bins = 30, alpha = 0.7) +\n  geom_density(alpha = 0.5, fill = \"lightblue\") +\n  theme_minimal() +\n  labs(title = \"Distribution of Ship Speed\",\n       x = \"Speed Over Ground (Knots)\",\n       y = \"Frequency\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n### Correlation: Fuel Efficiency vs. Speed\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(ship_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"date\"                    \"ship_type\"              \n [3] \"route_type\"              \"engine_type\"            \n [5] \"maintenance_status\"      \"speed_over_ground_knots\"\n [7] \"engine_power_k_w\"        \"distance_traveled_nm\"   \n [9] \"draft_meters\"            \"weather_condition\"      \n[11] \"cargo_weight_tons\"       \"operational_cost_usd\"   \n[13] \"revenue_per_voyage_usd\"  \"turnaround_time_hours\"  \n[15] \"efficiency_nm_per_k_wh\"  \"seasonal_impact_score\"  \n[17] \"weekly_voyage_count\"     \"average_load_percentage\"\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = speed_over_ground_knots, y = efficiency_nm_per_k_wh, color = ship_type)) +\n  geom_point(alpha = 0.7) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\") +\n  theme_minimal() +\n  labs(title = \"Fuel Efficiency vs. Ship Speed\",\n       x = \"Speed (Knots)\",\n       y = \"Efficiency (nm per kWh)\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n### Operational Cost vs. Revenue per Voyage by Ship Type\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = operational_cost_usd, y = revenue_per_voyage_usd, color = ship_type)) +\n  geom_point(alpha = 0.7) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  theme_minimal() +\n  labs(title = \"Operational Cost vs. Revenue per Voyage\",\n       x = \"Operational Cost (USD)\",\n       y = \"Revenue per Voyage (USD)\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n### Use geom_boxplot() for Distribution Insight\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = ship_type, y = revenue_per_voyage_usd, fill = ship_type)) +\n  geom_boxplot() +\n  theme_minimal() +\n  labs(title = \"Revenue Distribution by Ship Type\",\n       x = \"Ship Type\",\n       y = \"Revenue per Voyage (USD)\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = ship_type, y = revenue_per_voyage_usd, fill = ship_type)) +\n  geom_boxplot() +\n  facet_wrap(~ route_type, scales = \"free\") +  # Split by route type\n  theme_minimal() +\n  labs(title = \"Revenue Distribution by Ship Type and Route Type\",\n       x = \"Ship Type\",\n       y = \"Revenue per Voyage (USD)\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotate x-axis labels for readability\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = ship_type, y = revenue_per_voyage_usd / 1e6, fill = ship_type)) +\n  geom_boxplot() +\n  facet_grid(route_type ~ engine_type, scales = \"free\") +  # Split by Route & Engine Type\n  theme_minimal() +\n  labs(title = \"Revenue Distribution by Ship Type, Route Type, and Engine Type\",\n       x = \"Ship Type\",\n       y = \"Revenue per Voyage (Million USD)\") +  # Updated y-axis label\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotate x-axis labels for readability\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-14-1.png){width=1536}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = ship_type, y = revenue_per_voyage_usd / 1e6, fill = weather_condition)) +\n  geom_boxplot() +\n  facet_grid(route_type ~ engine_type, scales = \"free\") +  # Facet by Route Type (rows) & Engine Type (columns)\n  theme_minimal() +\n  labs(title = \"Revenue Distribution by Ship Type, Route Type, Engine Type, and Weather Condition\",\n       x = \"Ship Type\",\n       y = \"Revenue per Voyage (Million USD)\",\n       fill = \"Weather Condition\") +  # Updated legend title\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotate x-axis labels for readability\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-15-1.png){width=2304}\n:::\n:::\n\n\n\n### Use geom_smooth() with Aggregation (LOESS or GAM Smoothing)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ship_data, aes(x = operational_cost_usd, y = revenue_per_voyage_usd, color = ship_type)) +\n  geom_smooth(method = \"loess\", se = FALSE, size = 1.2) +  # LOESS smooth to capture trends\n  theme_minimal() +\n  labs(title = \"Smoothed Revenue Trends by Operational Cost\",\n       x = \"Operational Cost (USD)\",\n       y = \"Revenue per Voyage (USD)\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Take-home_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}